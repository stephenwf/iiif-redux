{"version":3,"sources":["webpack:///./src/components/ChromeTabs/ChromeTabs.js","webpack:///../iiif-redux/es/schema/presentation2.js","webpack:////Users/stephen.fraser/github.com/stephenwf/iiif-redux/iiif-redux-white.png","webpack:///../iiif-redux/es/compat/normalizeMetadataProperty.js","webpack:///../iiif-redux/es/compat/normalizeLanguageProperty.js","webpack:///../iiif-redux/es/createStore.js","webpack:///./src/spaces/tabs.js","webpack:///./src/components/ChromeIcon/ChromeIcon.js","webpack:///./src/components/App/App.js","webpack:///./src/components/ChromeNavigation/ChromeNavigation.js","webpack:///../iiif-redux/es/compat/normalizeLinkedResources.js","webpack:///./src/components/ChromeTab/ChromeTab.js","webpack:///../iiif-redux/es/utility/resourceListSelectorFactory.js","webpack:///../iiif-redux/es/spaces/iiif-resource.js","webpack:///../iiif-redux/src/spaces/frames.js","webpack:///../iiif-redux/es/compat/moveStartCanvasToSequence.js","webpack:///../iiif-redux/es/compat/normalizeSingleLanguageProperty.js","webpack:///../iiif-redux/es/sagas.js","webpack:///../iiif-redux/es/spaces/frames.js","webpack:///../iiif-redux/es/compat/addMissingIds.js","webpack:///../iiif-redux/es/spaces/routing.js","webpack:///../iiif-redux/es/compat/filterHtmlTags.js","webpack:///../iiif-redux/es/compat/normalizeLinkedResourceToObject.js","webpack:///./src/index.js","webpack:///../iiif-redux/es/compat/preprocessLinkedEntities.js","webpack:///../iiif-redux/es/api/frame.js","webpack:///../iiif-redux/es/spaces/manifests.js","webpack:///../iiif-redux/es/spaces/collections.js"],"names":["SortableChromeTabs","Object","__WEBPACK_IMPORTED_MODULE_2_react_sortable_hoc__","_ref","items","current","onClick","onClose","eWidth","props","_objectWithoutProperties","__WEBPACK_IMPORTED_MODULE_0_react___default","a","createElement","className","style","display","map","_ref2","index","id","value","__WEBPACK_IMPORTED_MODULE_3__ChromeTab_ChromeTab__","_extends","e","target","classList","contains","preventDefault","active","leftOffset","key","src","__WEBPACK_IMPORTED_MODULE_4__iiif_redux_white_png___default","height","width","ChromeTabs","tabContentEl","options","tabOverlapDistance","minWidth","maxWidth","getTabEffectiveWidth","tabWidth","this","getTabWidth","tabs","clientWidth","length","Math","max","min","componentDidMount","setState","mounted","render","_this2","_props","onSortEnd","ref","_ref4","_ref3","helperClass","axis","lockAxis","distance","zIndex","__WEBPACK_IMPORTED_MODULE_0_react__","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_4__compat_addMissingIds__","__webpack_require__","createEntity","name","__WEBPACK_IMPORTED_MODULE_1_normalizr__","Entity","idAttribute","collection","manifest","sequence","canvas","annotation","annotationList","range","layer","imageResource","choice","externalResource","service","within","Array","entity","rangeMember","Union","input","RESOURCE_TYPE_MAP","sc:Collection","sc:Sequence","sc:Manifest","sc:Canvas","sc:AnnotationList","sc:Annotation","sc:Range","sc:Layer","dctypes:Image","resource","profile","Error","define","collections","manifests","members","seeAlso","related","rendering","otherContent","thumbnail","sequences","structures","canvases","startCanvas","images","on","resources","ranges","contentLayer","default","item","preprocess","__WEBPACK_IMPORTED_MODULE_0_redux__","__WEBPACK_IMPORTED_MODULE_2__compat_moveStartCanvasToSequence__","__WEBPACK_IMPORTED_MODULE_3__compat_preprocessLinkedEntities__","normalizeResource","rawResource","customSchema","arguments","undefined","module","exports","p","normalizeMetadataProperty","__WEBPACK_IMPORTED_MODULE_0_lodash_memoize___default","metadata","defaultLanguage","isArray","metadataItem","label","__WEBPACK_IMPORTED_MODULE_1__normalizeLanguageProperty__","filter","normalizeLanguageProperty","property","@language","@value","__WEBPACK_IMPORTED_MODULE_1__filterHtmlTags__","prop","__WEBPACK_IMPORTED_MODULE_2__normalizeSingleLanguageProperty__","reduce","b","concat","extraMiddleware","defaultState","sagaMiddleware","__WEBPACK_IMPORTED_MODULE_1_redux_saga__","store","__WEBPACK_IMPORTED_MODULE_2__reducers__","composeEnhancers","apply","__WEBPACK_IMPORTED_MODULE_3__sagas__","saga","run","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","dispatch","createNewTab","__WEBPACK_IMPORTED_MODULE_0__iiif_redux_src_spaces_frames__","tabIndex","tabLabel","selectTab","closeTab","updateSortOrder","allFrames","oldIndex","newIndex","sortTabs","newOrder","__WEBPACK_IMPORTED_MODULE_1_react_sortable_hoc__","forEach","tab","setResource","frameId","resourceId","resourceType","frame","tabState","order","sort","ChromeIcon","type","iconProps","__WEBPACK_IMPORTED_MODULE_2_react___default","__WEBPACK_IMPORTED_MODULE_1_antd_es_icon__","__WEBPACK_IMPORTED_MODULE_2_react__","__WEBPACK_IMPORTED_MODULE_5__ChromeIcon_ChromeIcon__","App","state","_this","addNewTab","round","random","onClickTab","handleSearch","text","focused","componentWillMount","componentWillReceiveProps","newProps","allFrameIds","__WEBPACK_IMPORTED_MODULE_7__spaces_tabs__","__WEBPACK_IMPORTED_MODULE_4__ChromeTabs_ChromeTabs__","__WEBPACK_IMPORTED_MODULE_6__ChromeNavigation_ChromeNavigation__","searchValue","currentResource","onSearch","left","right","_ref5","color","marginTop","marginLeft","marginRight","__WEBPACK_IMPORTED_MODULE_1_react_redux__","__WEBPACK_IMPORTED_MODULE_2_reselect__","__WEBPACK_IMPORTED_MODULE_3_iiif_redux_es_api_frame__","api","getCurrentResourceId","getCurrentResourceType","singleFrame","getId","enabled","getEnabledExtensions","getExtensionById","config","ChromeNavigation","textValue","handleKeyUp","keyCode","textInput","handleChange","placeholder","onChange","onKeyUp","normalizeLinkedResources","__WEBPACK_IMPORTED_MODULE_1_lodash_memoize___default","__WEBPACK_IMPORTED_MODULE_2_valid_url___default","isWebUri","@id","__WEBPACK_IMPORTED_MODULE_0__normalizeLinkedResourceToObject__","version","xmlns","viewBox","d","href","x","transform","y","ChromeTab","children","getAllOfResource","rootApi","selector","__WEBPACK_IMPORTED_MODULE_0_reselect__","s","list","allResources","idOrResource","selectorOrStructured","_createActions2","_handleActions","_handleActions2","fn","requestResource","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","mark","_callee","wrap","_context","prev","next","abrupt","__WEBPACK_IMPORTED_MODULE_1_fetch_unless_cached___default","fetch","then","resp","json","stop","gen","Promise","resolve","reject","step","arg","info","error","done","err","_x3","_x4","obj","keys","i","indexOf","prototype","hasOwnProperty","call","_marked","errorAction","_marked2","successAction","_marked3","requestIiifResource","_marked4","requestUnknownResource","_marked5","debug","IIIF_RESOURCE_REQUEST","IIIF_RESOURCE_REQUEST_UNKNOWN","_createActions","__WEBPACK_IMPORTED_MODULE_2_redux_actions__","dereferenceIfMissing","ttl","forceFresh","types","schema","normalizedResponse","iiifResourceRequest","iiifResourceRequestUnknown","iiifResourceSuccess","iiifResourceError","DEFAULT_STATE","annotationLists","annotations","layers","imageResources","externalResources","resourceReducer","payload","__WEBPACK_IMPORTED_MODULE_6_deepmerge__","dereferencedReducer","_update","_ref2$payload","__WEBPACK_IMPORTED_MODULE_7_immutability_helper___default","$set","requested","Date","loading","_update2","_ref3$payload","_update3","_context2","__WEBPACK_IMPORTED_MODULE_5_redux_saga_effects__","_context3","_ref6","REQUEST","SUCCESS","ERROR","response","_normalize","result","entities","_context4","__WEBPACK_IMPORTED_MODULE_3_valid_url___default","sent","dereferenced","__WEBPACK_IMPORTED_MODULE_4__schema_presentation2__","t0","_ref7","_ref7$payload","_context5","_context6","__WEBPACK_IMPORTED_MODULE_0_redux_actions__","createActions","_ref3$smartJump","smartJump","extensionId","extensionConfig","frameCreate","frameDelete","frameSetInitialResource","frameGoToResource","frameGoBack","frameGoForward","frameGoBackToType","frameEnableExtension","frameConfigureExtension","frameDisableExtension","frameFocus","frameNextCanvas","framePreviousCanvas","handleActions","_list","_ref4$payload","__WEBPACK_IMPORTED_MODULE_1_immutability_helper___default","focusedFrame","path","enabledExtensions","extensions","$apply","_list2","_ref6$payload","_list3","ids","acc","push","newCurrent","newPath","slice","_ref8","_list4","_ref9","_list5","_ref10","_extensions","_list6","_ref10$payload","_ref11","_extensions2","_list7","_ref11$payload","$merge","_ref12","_list8","_ref12$payload","ext","_ref13","assign","source","normalizeSingleLanguageProperty","language","sagas","__WEBPACK_IMPORTED_MODULE_0__spaces_iiif_resource__","__WEBPACK_IMPORTED_MODULE_1__spaces_collections__","__WEBPACK_IMPORTED_MODULE_2__spaces_manifests__","__WEBPACK_IMPORTED_MODULE_1_immutability_helper__","n","DEFAULT_FRAME_ID","reducer","jsonLd","__WEBPACK_IMPORTED_MODULE_0_traverse___default","update","__WEBPACK_IMPORTED_MODULE_1_object_hash___default","__WEBPACK_IMPORTED_MODULE_1_object_hash__","ROUTING_SELECT_COLLECTION","ROUTING_SELECT_MANIFEST","selectCollection","deselectCollection","selectManifest","deselectManifest","selectSequence","deselectSequence","selectCanvas","deselectCanvas","selectAnnotationList","deselectAnnotationList","selectAnnotation","deselectAnnotation","selectRange","deselectRange","selectLayer","deselectLayer","selectImageResource","deselectImageResource","selectUpdater","deselectUpdater","currentSequence","currentManifest","currentCanvas","currentAnnotationList","currentAnnotation","currentRange","currentLayer","currentImageResource","currentCollection","filterHtmlTags","str","allowed","replacement","__WEBPACK_IMPORTED_MODULE_0_striptags___default","normalizeLinkedResourceToObject","__WEBPACK_IMPORTED_MODULE_1_valid_url___default","localStorage","console","log","__WEBPACK_IMPORTED_MODULE_0_iiif_redux__","__WEBPACK_IMPORTED_MODULE_3_react_dom__","__WEBPACK_IMPORTED_MODULE_4__components_App_App__","document","querySelector","__WEBPACK_IMPORTED_MODULE_3_traverse___default","entryValue","__WEBPACK_IMPORTED_MODULE_2__normalizeMetadataProperty__","__WEBPACK_IMPORTED_MODULE_0__normalizeLinkedResources__","linkedResources","__WEBPACK_IMPORTED_MODULE_3__utility_resourceListSelectorFactory__","__WEBPACK_IMPORTED_MODULE_1_reselect__","currentFrame","isFocused","frames","currentFrameId","focusedFrameId","getCurrentPath","getCurrentPathIndex","getCurrentResource","currentPath","currentIndex","getCurrentResourceByType","getTopLevel","getAllTypes","canGoBack","pathIndex","canGoForward","getHistory","getFullHistory","canGoBackToType","history","pathItem","getAllExtensionsInternal","getAllExtensionIds","mapSingleExtension","allExtensions","getAllExtensions","extensionIds","getEnabledExtensionIds","isExtensionEnabled","getDisabledExtensionIds","allExtensionIds","enabledExtensionIds","disabled","getDisabledExtensions","getFocusedFrameId","callable","_ref$getId","__WEBPACK_IMPORTED_MODULE_2__spaces_frames__","selectorOrStructure","toString","passThroughState","getAllFrames","getAllFrameIds","getFocusedFrame","fetchManifest","MANIFEST_REQUEST","MANIFEST_SUCCESS","MANIFEST_ERROR","__WEBPACK_IMPORTED_MODULE_1_redux_saga_effects__","__WEBPACK_IMPORTED_MODULE_4__iiif_resource__","__WEBPACK_IMPORTED_MODULE_3__schema_presentation2__","__WEBPACK_IMPORTED_MODULE_2__routing__","fetchCollection","COLLECTION_REQUEST","COLLECTION_SUCCESS","COLLECTION_ERROR"],"mappings":"ieAMA,IAAMA,EAAqBC,OAAAC,EAAA,kBAAAD,CACzB,SAAAE,GAAA,IAAGC,EAAHD,EAAGC,MAAOC,EAAVF,EAAUE,QAASC,EAAnBH,EAAmBG,QAASC,EAA5BJ,EAA4BI,QAASC,EAArCL,EAAqCK,OAAWC,yHAAhDC,CAAAP,GAAA,wDACEQ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,uBAAuBC,OAASC,QAAS,SACrDZ,EAAMa,IAAI,SAAAC,EAAgBC,GAAhB,IAAGC,EAAHF,EAAGE,GAAIC,EAAPH,EAAOG,MAAP,OACTV,EAAAC,EAAAC,cAACS,EAAA,EAADC,GACEjB,QAAS,SAAAkB,GACFA,EAAEC,OAAOC,UAAUC,SAAS,qBAC/BrB,EAAQc,IAGZb,QAAS,SAAAiB,GACPA,EAAEI,iBACFrB,EAAQa,IAEVS,OAAQT,IAAOf,EACfyB,YAAaX,EAAQ,GAAKX,EAC1BuB,IAAKZ,EACLA,MAAOA,GACHV,GAEHY,UAoDHV,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,OAAKmB,IAAKC,EAAArB,EAAMsB,OAAO,OAAOC,MAAM,UA9CxCC,mQACJC,aAAe,OACfC,SACEC,mBAAoB,GACpBC,SAAU,GACVC,SAAU,8VAGZC,8BAAqBC,GACnB,OAAOA,EAAWC,KAAKN,QAAQC,gCAGjCM,qBAAYC,GACV,IAAKF,KAAKP,aACR,OAAOO,KAAKN,QAAQG,SAEtB,IAEMN,GADJS,KAAKP,aAAaU,YAAcH,KAAKN,QAAQC,oBAE1BO,EAAKE,OAASJ,KAAKN,QAAQC,mBAEhD,OAAOU,KAAKC,IACVN,KAAKN,QAAQE,SACbS,KAAKE,IAAIP,KAAKN,QAAQG,SAAUN,iBAIpCiB,6BACER,KAAKS,UACHC,SAAS,iBAIbC,kBAAS,IAAAC,EAAAZ,KAAAa,EACgDb,KAAKnC,MAApDqC,EADDW,EACCX,KAAMY,EADPD,EACOC,UAAWpD,EADlBmD,EACkBnD,QAASC,EAD3BkD,EAC2BlD,QAASF,EADpCoD,EACoCpD,QACrC8B,EAAQS,KAAKC,YAAYC,GACzBtC,EAASoC,KAAKF,qBAAqBP,GAEzC,OACExB,EAAAC,EAAAC,cAAA,OACE8C,IAAK,SAAAC,GACHJ,EAAKnB,aAAesB,GAEtB7C,UAAU,sCAJZ+C,EASElD,EAAAC,EAAAC,cAACb,GACC8D,YAAY,uBACZC,KAAK,IACLC,SAAS,IACT5D,MAAO0C,EACPX,MAAOA,EACP3B,OAAQA,EACRkD,UAAWA,EACXO,SAAU,EACV1D,QAASA,EACTD,QAASA,EACTD,QAASA,IAEXM,EAAAC,EAAAC,cAAA,OAAKC,UAAU,yBAAyBC,OAASmD,OAAQ,UA7DxCC,EAAA,WAmEzBC,EAAA,qSCpGAC,EAAAC,EAAA,QA0BA,SAASC,EAAaC,GAKpB,OAAO,IAAIC,EAAA,OAAOC,OAAOF,MAHvBG,YAAa,QAMjB,IAAIC,EAAaL,EAAa,eAC1BM,EAAWN,EAAa,aACxBO,EAAWP,EAAa,aACxBQ,EAASR,EAAa,YACtBS,EAAaT,EAAa,eAC1BU,EAAiBV,EAAa,mBAC9BW,EAAQX,EAAa,UACrBY,EAAQZ,EAAa,UACrBa,EAAgBb,EAAa,kBAC7Bc,EAASd,EAAa,WAGtBe,EAAmBf,EAAa,qBAChCgB,EAAUhB,EAAa,YACvBiB,EAAS,IAAIf,EAAA,OAAOgB,OACtBb,WAAYA,EACZC,SAAUA,EACVS,iBAAkBA,EAClBH,MAAOA,GACN,SAAUO,GACX,OAAQA,EAAO,UACb,IAAK,gBACH,MAAO,aACT,IAAK,cACH,MAAO,WACT,IAAK,WACH,MAAO,QACT,QACE,MAAO,sBAITC,EAAc,IAAIlB,EAAA,OAAOmB,OAC3Bb,OAAQA,EACRG,MAAOA,GACN,SAAUW,GACX,MAA0B,cAAnBA,EAAM,SAA2B,SAAW,UAkBjDC,GACFC,gBAAiB,aACjBC,cAAe,WACfC,cAAe,WACfC,YAAa,SACbC,oBAAqB,iBACrBC,gBAAiB,aACjBC,WAAY,QACZC,WAAY,QACZC,gBAAiB,iBAEfC,EAAW,IAAI/B,EAAA,OAAOmB,OACxBhB,WAAYA,EACZE,SAAUA,EACVD,SAAUA,EACVE,OAAQA,EACRE,eAAgBA,EAChBD,WAAYA,EACZE,MAAOA,EACPC,MAAOA,EACPC,cAAeA,EACfG,QAASA,GACR,SAAUG,GACX,GAAII,EAAkBJ,EAAO,UAC3B,OAAOI,EAAkBJ,EAAO,UAElC,GAAIA,EAAOe,QACT,MAAO,UAET,MAAMC,MAAM,yBAMd9B,EAAW+B,QACTC,YAAa,IAAInC,EAAA,OAAOgB,OACtBb,WAAYA,EACZC,SAAUA,GACT,SAAUa,GACX,MAA2B,gBAApBA,EAAO,SAA6B,WAAa,eAE1DmB,WAAYhC,GACZiC,QAAS,IAAIrC,EAAA,OAAOgB,OAClBb,WAAYA,EACZC,SAAUA,GACT,SAAUa,GACX,MAA2B,gBAApBA,EAAO,SAA6B,WAAa,eAI1DqB,SAAUzB,GACVC,SAAUA,GACVyB,SAAU1B,GACV2B,WAAY3B,GACZ4B,cAAejC,GACfO,OAAQA,EAGR2B,UAAW/B,IAMbP,EAAS8B,QACPS,WAAYtC,GACZuC,YAAanC,GAGb6B,SAAUzB,GACVC,SAAUA,GACVyB,SAAU1B,GACV2B,WAAY3B,GACZ4B,cAAejC,GACfO,OAAQA,EAGR2B,UAAW/B,IAMbN,EAAS6B,QACPW,UAAWvC,GAGXgC,SAAUzB,GACVC,SAAUA,GACVyB,SAAU1B,GACV2B,WAAY3B,GACZ4B,cAAejC,GACfO,OAAQA,EACR+B,YAAaxC,EAGboC,UAAW/B,IAMbL,EAAO4B,QACLa,QAASxC,GAGT+B,SAAUzB,GACVC,SAAUA,GACVyB,SAAU1B,GACV2B,WAAY3B,GACZ4B,cAAejC,GACfO,OAAQA,EAGR2B,UAAW/B,IAMbJ,EAAW2B,QACTH,SAAU,IAAI/B,EAAA,OAAOmB,OACnBR,cAAeA,EACfE,iBAAkBA,EAClBD,OAAQA,GACP,SAAUQ,GACX,OAAQA,EAAM,UACZ,IAAK,gBACH,MAAO,gBACT,IAAK,YACH,MAAO,SACT,QACE,MAAO,sBAGb4B,GAAI1C,EAGJgC,SAAUzB,GACVC,SAAUA,GACVyB,SAAU1B,GACV2B,WAAY3B,GACZE,OAAQA,EAGR2B,UAAW/B,IAMbH,EAAe0B,QACbe,WAAY1C,GAGZ+B,SAAUzB,GACVC,SAAUA,GACVyB,SAAU1B,GACV2B,WAAY3B,GACZE,OAAQA,EAGR2B,UAAW/B,IAMbF,EAAMyB,QACJe,WAAY1C,GACZ8B,SAAUnB,GACV2B,UAAWvC,GACX4C,QAASzC,GAGT6B,SAAUzB,GACVC,SAAUA,GACVyB,SAAU1B,GACV2B,WAAY3B,GACZE,OAAQA,EACR+B,YAAaxC,EACb6C,aAAczC,EAGdgC,UAAW/B,IAMbD,EAAMwB,QAEJI,SAAUzB,GACVC,SAAUA,GACVyB,SAAU1B,GACV2B,WAAY3B,GACZE,OAAQA,IAMVJ,EAAcuB,QACZpB,SAAUA,KAMZF,EAAOsB,QACLkB,QAAS7C,EACT8C,MAAO9C,KAGT,IAAI+C,EAAa9H,OAAA+H,EAAA,EAAA/H,CAAQgI,EAAA,EAA2BC,EAAA,EAA0B7D,EAAA,GAE1E8D,EAAoB,SAA2BC,GACjD,IAAIC,EAAeC,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,GAAK9B,EACvF,OAAOvG,OAAAwE,EAAA,UAAAxE,CAAU8H,EAAWK,GAAcC,4BCnT5CG,EAAAC,QAAAnE,EAAAoE,EAAA,0GCGIC,EAA4BC,IAAQ,SAAUC,EAAUC,GAC1D,OAAOrD,MAAMsD,QAAQF,GAAYA,EAAS5H,IAAI,SAAU+H,GACtD,OAAOA,EAAa3H,OAClB4H,MAAOhJ,OAAAiJ,EAAA,EAAAjJ,CAA0B+I,EAAaC,MAAOH,GACrDzH,MAAOpB,OAAAiJ,EAAA,EAAAjJ,CAA0B+I,EAAa3H,MAAOyH,IACnD,OACHK,OAAO,SAAU3H,GAClB,OAAOA,SAIX4C,EAAA,0FCVIgF,EAA4BR,IAAQ,SAAUS,EAAUP,GAC1D,OAAKO,EAGmB,iBAAbA,IACCC,YAAaR,EAAiBS,SAAUtJ,OAAAuJ,EAAA,EAAAvJ,CAAeoJ,KAE/D5D,MAAMsD,QAAQM,GACTA,EAASpI,IAAI,SAAUwI,GAC5B,OAAOxJ,OAAAyJ,EAAA,EAAAzJ,CAAgCwJ,EAAMX,KAC5Ca,OAAO,SAAU/I,EAAGgJ,GACrB,OAAOhJ,EAAEiJ,OAAOD,QACXT,OAAO,SAAU3H,GACtB,OAAOA,IAGJvB,OAAAyJ,EAAA,EAAAzJ,CAAgCoJ,EAAUP,QAGnD1E,EAAA,2CChBe,WACQkE,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,IAAmBA,UAAU,GAApF,IACIwB,EAAkBxB,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,MAEjFyB,GADczB,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,IAAmBA,UAAU,GAC9DA,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,OAE9E0B,EAAiB/J,OAAAgK,EAAA,EAAAhK,GAEjBiK,EAAQjK,OAAA+H,EAAA,EAAA/H,CAAYA,OAAA+H,EAAA,EAAA/H,CAAgBkK,GAAWJ,EAAcK,EAAiBpC,EAAA,EAAgBqC,WAAM9B,GAAYyB,GAAgBH,OAAOC,MAO3I,OALAQ,EAAA,EAAMrJ,IAAI,SAAUsJ,GAClB,OAAOP,EAAeQ,IAAID,KAIrBL,uDAjBLE,EAAmBK,OAAOC,sCAAwC1C,EAAA,+CCuE/D,SAAoB2C,GACzB,OACEC,aAnEJ,SAAsBD,GACpB,OAAO,SAACvJ,EAAI6H,EAAO9H,GACjBwJ,EAAS1K,OAAA4K,EAAA,EAAA5K,IAAgBmB,IACzBuJ,EACE1K,OAAA4K,EAAA,EAAA5K,CACE,YAEE6K,SAAU3J,EACV4J,SAAU9B,GAEZ7H,KAyDUwJ,CAAaD,GAC3BK,UApDJ,SAAmBL,GACjB,OAAO,SAAAvJ,GACLuJ,EAAS1K,OAAA4K,EAAA,EAAA5K,CAAWmB,KAkDT4J,CAAUL,GACrBM,SA/CJ,SAAkBN,GAChB,OAAO,SAAAvJ,GACLuJ,EAAS1K,OAAA4K,EAAA,EAAA5K,CAAYmB,KA6CX6J,CAASN,GACnBO,gBA1CJ,SAAyBP,GACvB,OAAO,SAACQ,EAAWC,EAAUC,GAC3B,IAAMvI,EAAOwI,EAASH,GAChBI,EAAWtL,OAAAuL,EAAA,UAAAvL,CAAU6C,EAAMsI,EAAUC,GAE3CE,EAASE,QAAQ,SAACC,EAAKvK,GACrBwJ,EACE1K,OAAA4K,EAAA,EAAA5K,CAAwB,YAAc6K,SAAU3J,GAASuK,EAAItK,QAmChD8J,CAAgBP,GACjCgB,YA9BG,SAAqBhB,GAC1B,OAAO,SAACiB,EAASC,EAAYC,GAC3BnB,EAAS1K,OAAA4K,EAAA,EAAA5K,EAA0B4L,aAAYC,gBAAgBF,KA4BlDD,CAAYhB,wCAxBtB,SAASW,EAASH,GACvB,OAAOA,EACJlK,IAAI,SAAA8K,GAAA,OACH3K,GAAI2K,EAAM3K,GACVC,MAAO0K,EAAMC,SAASjB,SACtBkB,MAAOF,EAAMC,SAASlB,YAEvBoB,KAAK,SAACtL,EAAGgJ,GACR,OAAIhJ,EAAEqL,MAAQrC,EAAEqC,MACP,EAELrL,EAAEqL,MAAQrC,EAAEqC,OACN,EAEH,oRCpEPE,ypBACJ5I,kBAAS,IAAAE,EAC+Bb,KAAKnC,MAAnC2L,EADD3I,EACC2I,KAAMC,EADP5I,EACO4I,UAAc5L,yHADrBC,CAAA+C,GAAA,qBAEP,OACE6I,EAAA1L,EAAAC,cAAA,MAAAU,GAAKT,UAAU,eAAkBL,GAC/B6L,EAAA1L,EAAAC,cAAA0L,EAAA,EAAAhL,GAAM6K,KAAMA,GAAUC,SALLG,EAAA,WAWzBpI,EAAA,2VCwDYzD,EAAAC,EAAAC,cAAC4L,EAAA,GAAW1K,IAAI,OAAOqK,KAAK,WAC5BzL,EAAAC,EAAAC,cAAC4L,EAAA,GAAW1K,IAAI,QAAQqK,KAAK,YAC7BzL,EAAAC,EAAAC,cAAC4L,EAAA,GAAW1K,IAAI,SAASqK,KAAK,aAGnBzL,EAAAC,EAAAC,cAAC4L,EAAA,GAAWL,KAAK,SAhElCM,mQACJC,OACE7J,OAAS1B,GAAI,EAAGC,MAAO,gBAAmBD,GAAI,EAAGC,MAAO,gBACxDhB,QAAS,KAaXqD,UAAY,SAAAvD,GAA4B,IAAzBiL,EAAyBjL,EAAzBiL,SAAUC,EAAelL,EAAfkL,SACvBuB,EAAKnM,MAAMyK,gBAAgB0B,EAAKnM,MAAM0K,UAAWC,EAAUC,MAG7DwB,UAAY,WACV,IACMzL,aADM6B,KAAK6J,MAAsB,IAAhB7J,KAAK8J,UAE5BH,EAAKnM,MAAMmK,aAAaxJ,EAAI,UAAWwL,EAAKnM,MAAM0K,UAAUnI,WAG9DgK,WAAa,SAAA5L,GACXwL,EAAKnM,MAAMuK,UAAU5J,MAGvBb,QAAU,SAAAa,GACRwL,EAAKnM,MAAMwK,SAAS7J,MAGtB6L,aAAe,SAAAC,GACbN,EAAKnM,MAAMkL,YAAYiB,EAAKnM,MAAM0M,QAASD,EAAM,wWA7BnDE,8BACExK,KAAKnC,MAAMmK,aAAa,YAAa,UAAW,gBAGlDyC,mCAA0BC,GACC,OAArBA,EAASH,SAAoBG,EAASC,YAAYvK,QACpDJ,KAAKnC,MAAMuK,UAAUsC,EAASC,YAAY,iBA0B9ChK,kBAAS,IAAAC,EAAAZ,KAAAa,EACwBb,KAAKnC,MAA5B0M,EADD1J,EACC0J,QAAShC,EADV1H,EACU0H,UACXrI,EAAO7C,OAAAuN,EAAA,EAAAvN,CAASkL,GAEtB,OACExK,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC4M,EAAA,GACC3K,KAAMA,EACNzC,QAAS8M,EACT7M,QAASsC,KAAKoK,WACdtJ,UAAWd,KAAKc,UAChBnD,QAASqC,KAAKrC,UAEhBI,EAAAC,EAAAC,cAAC6M,EAAA,GACCC,YACE/K,KAAKnC,MAAMmN,iBACPhL,KAAKnC,MAAMmN,gBAAgBxM,IAC3B,GAENyM,SAAUjL,KAAKqK,aACfa,KAAM,kBAAM5M,EAAA2C,EAAAD,EAIVjD,EAAAC,EAAAC,cAAC4L,EAAA,GAAW1K,IAAI,OAAOqK,KAAK,OAAO9L,QAASkD,EAAKqJ,cAEnDkB,MAAO,kBAAAC,KAGRpL,KAAKnC,MAAMmN,iBAAmBhL,KAAKnC,MAAMmN,gBAAgBxM,GACxDT,EAAAC,EAAAC,cAAA,OACEE,OACEkN,MAAO,OACPC,UAAW,IACXC,WAAY,OACZC,YAAa,OACbjM,MAAO,QANX,oBAUExB,EAAAC,EAAAC,cAAA,MAAIE,OAASkN,MAAO,SAAWrL,KAAKnC,MAAMmN,gBAAgBxM,IAC1DT,EAAAC,EAAAC,cAAA,kBACQF,EAAAC,EAAAC,cAAA,cAAS+B,KAAKnC,MAAMmN,gBAAgBxB,QAI9CzL,EAAAC,EAAAC,cAAA,OACEE,OACEkN,MAAO,OACPC,UAAW,IACXC,WAAY,OACZC,YAAa,OACbjM,MAAO,QAGTxB,EAAAC,EAAAC,cAAA,MAAIE,OAASkN,MAAO,SAApB,iDA7FM9J,EAAA,WAuGlBC,EAAA,EAAenE,OAAAoO,EAAA,EAAApO,CACbA,OAAAqO,EAAA,yBAAArO,EACE2N,gBAAiB3N,OAAAsO,EAAA,EAAAtO,CAAa,SAAAuO,GAAA,OAC5BpN,GAAIoN,EAAIC,qBACRrC,KAAMoC,EAAIE,0BAEZvB,QAASoB,EAAA,EACThB,YAAagB,EAAA,EACbpD,UAAWlL,OAAAsO,EAAA,EAAAtO,CAAOsO,EAAA,EAAgB,SAAAI,GAAA,OAChCvN,GAAIuN,EAAYC,MAChBC,QAASF,EAAYG,qBACrB9C,SAAU/L,OAAAqO,EAAA,eAAArO,CACR0O,EAAYI,iBAAiB,YAC7B,SAAA/C,GAAA,OAAYA,EAASgD,cAI3BxB,EAAA,EAjBF,CAkBEd,yPClIIuC,mQACJtC,OAAUuC,UAAW,MAErBC,YAAc,SAAA3N,GACM,KAAdA,EAAE4N,SAEJxC,EAAKnM,MAAMoN,SAASjB,EAAKyC,UAAUhO,UAIvCiO,aAAe,SAAA9N,GACboL,EAAKvJ,UAAWsK,YAAanM,EAAEC,OAAOJ,kWAGxCgM,mCAA0BC,GACpB1K,KAAKnC,MAAMkN,cAAgBL,EAASK,aACtC/K,KAAKS,UAAWsK,YAAaL,EAASK,2BAI1CpK,kBAAS,IAAAC,EAAAZ,KAAAa,EAC2Bb,KAAKnC,MAA/BqN,EADDrK,EACCqK,KAAMC,EADPtK,EACOsK,MAAUtN,yHADjBC,CAAA+C,GAAA,iBAEP,OACE9C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBACZgN,EAAOA,EAAKrN,GAAS,KACtBE,EAAAC,EAAAC,cAAA,SACEQ,MAAOuB,KAAK+J,MAAMgB,YAClBhK,IAAK,SAAAxD,GAAA,OAAQqD,EAAK6L,UAAY1L,GAC9ByI,KAAK,OACLtL,UAAU,2BACVyO,YAAY,6CACZC,SAAU5M,KAAK0M,aACfG,QAAS7M,KAAKuM,cAEfpB,EAAQA,EAAMtN,GAAS,UAlCD0D,EAAA,WAwC/BC,EAAA,iGCvCIsL,EAA2BC,IAAQ,SAAUtG,GAC/C,OAAKA,EAGmB,iBAAbA,EACJuG,EAAAhP,EAASiP,SAASxG,KAGbyG,MAAOzG,IAFR,KAIP5D,MAAMsD,QAAQM,GACTA,EAASpI,IAAI,SAAUwI,GAC5B,OAAOxJ,OAAA8P,EAAA,EAAA9P,CAAgCwJ,KACtCE,OAAO,SAAU/I,EAAGgJ,GACrB,OAAOhJ,EAAEiJ,OAAOD,QACXT,OAAO,SAAU3H,GACtB,OAAOA,IAGJvB,OAAA8P,EAAA,EAAA9P,CAAgCoJ,QAGzCjF,EAAA,8GCVQzD,EAAAC,EAAAC,cAAA,OAAKC,UAAU,yBACbH,EAAAC,EAAAC,cAAA,OAAKmP,QAAQ,MAAMC,MAAM,8BACvBtP,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,UAAQO,GAAG,2BAA2B8O,QAAQ,cAC5CvP,EAAAC,EAAAC,cAAA,QAAMsP,EAAE,sFAEVxP,EAAAC,EAAAC,cAAA,UAAQO,GAAG,4BAA4B8O,QAAQ,cAC7CvP,EAAAC,EAAAC,cAAA,OAAKuP,KAAK,+BAEZzP,EAAAC,EAAAC,cAAA,YAAUO,GAAG,QACXT,EAAAC,EAAAC,cAAA,QAAMC,UAAU,OAAOqB,MAAM,OAAOD,OAAO,OAAOmO,EAAE,QAGxD1P,EAAAC,EAAAC,cAAA,OAAKsB,MAAM,MAAMD,OAAO,QACtBvB,EAAAC,EAAAC,cAAA,OACEuP,KAAK,4BACLjO,MAAM,MACND,OAAO,KACPpB,UAAU,0BAEZH,EAAAC,EAAAC,cAAA,OACEuP,KAAK,4BACLjO,MAAM,MACND,OAAO,KACPpB,UAAU,uBAGdH,EAAAC,EAAAC,cAAA,KAAGyP,UAAU,gBACX3P,EAAAC,EAAAC,cAAA,OAAKsB,MAAM,MAAMD,OAAO,OAAOmO,EAAE,QAAQE,EAAE,KACzC5P,EAAAC,EAAAC,cAAA,OACEuP,KAAK,6BACLjO,MAAM,MACND,OAAO,KACPpB,UAAU,0BAEZH,EAAAC,EAAAC,cAAA,OACEuP,KAAK,6BACLjO,MAAM,MACND,OAAO,KACPpB,UAAU,4BAMpBH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,uBAzDjB0P,ypBACJjN,kBACE,OACE5C,EAAAC,EAAAC,cAAA,OACEP,QAASsC,KAAKnC,MAAMH,QACpBQ,WACE8B,KAAKnC,MAAMoB,OAAS,qBAAuB,IAD7C,cAGAd,OACEoB,MAAOS,KAAKnC,MAAM0B,QANtBhC,EAAAe,EAuDEP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBAAoB8B,KAAKnC,MAAMgQ,UAC9C9P,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBAAmBR,QAASsC,KAAKnC,MAAMF,eA3DtC4D,EAAA,WAiExBC,EAAA,EAAenE,OAAAC,EAAA,gBAAf,CAA+B,SAAAO,GAAA,OAASE,EAAAC,EAAAC,cAAC2P,EAAc/P,4CClExC,SAAqCiQ,EAAkBC,GACpE,OAAOhB,IAAQ,SAAUiB,EAAUpC,GACjC,OAAOvO,OAAA4Q,EAAA,eAAA5Q,CAAe2Q,EAAUF,EAAkB,SAAUI,GAC1D,OAAOA,GACN,SAAUC,EAAMC,EAAcrE,GAC/B,OAAOoE,EAAK9P,IAAI,SAAUgQ,GACxB,IAAIC,EAAuB1C,EAAImC,EAAQ,WACrC,MAA+B,iBAAjBM,EAA4BD,EAAaC,GAAgBA,KAGzE,MAAoC,mBAAzBC,EACFA,EAAqBvE,GAGvB1M,OAAA4Q,EAAA,yBAAA5Q,CAAyBiR,EAAzBjR,CAA+C0M,iOCf1DwE,EAAiBC,EAAgBC,EAyCVC,EAtCrBtD,sIADFuD,GAuCuBD,EAtCmBE,EAAA5Q,EAAoB6Q,KAAK,SAASC,EAAQ7F,EAAYvJ,GAChG,OAAOkP,EAAA5Q,EAAoB+Q,KAAK,SAAkBC,GAChD,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAMH,OAAOF,EAASG,OAAO,SAAUC,IAAYnG,IAE/C,KAAK,EACH,OAAO+F,EAASG,OAAO,SAAUE,MAAMpG,GAAYqG,KAAK,SAAUC,GAChE,OAAOA,EAAKC,UAGhB,KAAK,EACL,IAAK,MACH,OAAOR,EAASS,SAGrBX,EAAS9O,QAtBVoL,EAsCkC,WAAc,IAAIsE,EAAMhB,EAAGjH,MAAMzH,KAAM0F,WAAY,OAAO,IAAIiK,QAAQ,SAAUC,EAASC,GAA4S,OAAlS,SAASC,EAAK3Q,EAAK4Q,GAAO,IAAM,IAAIC,EAAON,EAAIvQ,GAAK4Q,GAAUtR,EAAQuR,EAAKvR,MAAS,MAAOwR,GAAwB,YAAfJ,EAAOI,GAAkB,IAAID,EAAKE,KAAiC,OAAOP,QAAQC,QAAQnR,GAAO6Q,KAAK,SAAU7Q,GAASqR,EAAK,OAAQrR,IAAW,SAAU0R,GAAOL,EAAK,QAASK,KAAtIP,EAAQnR,GAAmJqR,CAAK,WAbhb,SAAyBM,EAAKC,GACnC,OAAOjF,EAAM3D,MAAMzH,KAAM0F,aAI7B,SAAS5H,EAAyBwS,EAAKC,GAAQ,IAAI1R,KAAa,IAAK,IAAI2R,KAAKF,EAAWC,EAAKE,QAAQD,IAAM,GAAkBnT,OAAOqT,UAAUC,eAAeC,KAAKN,EAAKE,KAAc3R,EAAO2R,GAAKF,EAAIE,IAAM,OAAO3R,EAEnN,IAAIgS,EAAuBjC,EAAA5Q,EAAoB6Q,KAAKiC,GAChDC,EAAwBnC,EAAA5Q,EAAoB6Q,KAAKmC,GACjDC,EAAwBrC,EAAA5Q,EAAoB6Q,KAAKqC,GACjDC,EAAwBvC,EAAA5Q,EAAoB6Q,KAAKuC,GACjDC,EAAwBzC,EAAA5Q,EAAoB6Q,KAAKlH,GAWrD,IAAI2J,EAAQ5P,EAAQ,OAARA,CAAiB,cAEzB6P,EAAwB,wBAGxBC,EAAgC,gCAGhCC,EAAiBpU,OAAAqU,EAAA,EAAArU,GAAekR,MAAsCiD,GAAiC,SAAUvI,GACnH,IAAIvJ,EAAUgG,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,MAC7E,OACEuD,WAAYA,EACZ0I,qBAAsBjS,EAAQiS,uBAAwB,EACtDC,IAAKlS,EAAQkS,KAAO,IACpBC,WAAYnS,EAAQmS,aAErBtD,EAAgBgD,GAAyB,SAAUtI,EAAY6I,EAAOC,GACvE,IAAIrS,EAAUgG,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,MAC7E,OACEuD,WAAYA,EACZ6I,MAAOA,EACPC,OAAQA,EACRJ,qBAAsBjS,EAAQiS,uBAAwB,EACtDC,IAAKlS,EAAQkS,KAAO,IACpBC,WAAYnS,EAAQmS,aAErBtD,EAAA,sBAAyC,SAAUtF,EAAY+I,GAChE,OACE/I,WAAYA,EACZ+I,mBAAoBA,IAErBzD,EAAA,oBAAuC,SAAUtF,EAAYgH,GAC9D,OACEhH,WAAYA,EACZgH,MAAOA,IAER1B,IAEC0D,GAD6BR,EAAeS,2BACtBT,EAAeQ,qBACrCE,EAAsBV,EAAeU,oBACrCC,EAAoBX,EAAeW,kBAEnCC,QAGArO,eACAQ,aACAP,aACAS,YACA4N,mBACAC,eACAxN,UACAyN,UACAC,kBACAC,sBAIAC,EAAkBtV,OAAAqU,EAAA,EAAArU,GAAemR,MAAoC2D,GAAuB,SAAUpI,EAAOxM,GAC/G,IAAIyU,EAAqBzU,EAAKqV,QAAQZ,mBACtC,OAAO3U,OAAAwV,EAAA,EAAAxV,CAAU0M,EAAOiI,IACvBxD,GAAiB6D,GAEhBS,EAAsBzV,OAAAqU,EAAA,EAAArU,GAAeoR,MAAsCwD,GAAuB,SAAUlI,EAAOzL,GACrH,IAAIyU,EAEAC,EAAgB1U,EAAMsU,QACtB3J,EAAa+J,EAAc/J,WAC3B2I,EAAMoB,EAAcpB,IACxB,OAAOqB,IAAOlJ,IAAQgJ,MAAsB9J,IAC1CiK,MACEjK,WAAYA,EACZ2I,IAAKA,EACLuB,UAAWpJ,EAAMd,GAAcc,EAAMd,GAAYkK,UAAY,IAAIC,KACjEC,SAAStJ,EAAMd,IAAcc,EAAMd,GAAYoK,UAEhDN,KACFtE,EAAgB2D,GAAqB,SAAUrI,EAAO9I,GACvD,IAAIqS,EAEAC,EAAgBtS,EAAM2R,QACtB3J,EAAasK,EAActK,WAC3BgH,EAAQsD,EAActD,MAC1B,OAAOgD,IAAOlJ,IAAQuJ,MAAwBrK,IAC5CoK,SAAWH,MAAM,GACjBjD,OAASiD,KAAMjD,IACdqD,KACF7E,EAAgB0D,GAAuB,SAAUpI,EAAO/I,GACzD,IAAIwS,EAEAvK,EAAajI,EAAM4R,QAAQ3J,WAC/B,OAAOgK,IAAOlJ,IAAQyJ,MAAwBvK,IAC5CoK,SAAWH,MAAM,IAChBM,KACF/E,GAAkB4D,GAErB,SAASvB,EAAYtH,EAAMP,EAAYgH,GACrC,OAAOrB,EAAA5Q,EAAoB+Q,KAAK,SAAsB0E,GACpD,OACE,OAAQA,EAAUxE,KAAOwE,EAAUvE,MACjC,KAAK,EAEH,OADAuE,EAAUvE,KAAO,EACV7R,OAAAqW,EAAA,EAAArW,CAAI+U,EAAkBnJ,EAAYgH,IAE3C,KAAK,EACH,IAAKzG,EAAM,CACTiK,EAAUvE,KAAO,EACjB,MAIF,OADAuE,EAAUvE,KAAO,EACV7R,OAAAqW,EAAA,EAAArW,EAAMmM,KAAMA,EAAMoJ,SAAW3J,WAAYA,EAAYgH,MAAOA,KAErE,KAAK,EACL,IAAK,MACH,OAAOwD,EAAUhE,SAGtBoB,EAAS7Q,MAGd,SAASgR,EAAcxH,EAAMP,EAAY+I,GACvC,OAAOpD,EAAA5Q,EAAoB+Q,KAAK,SAAwB4E,GACtD,OACE,OAAQA,EAAU1E,KAAO0E,EAAUzE,MACjC,KAAK,EAEH,OADAyE,EAAUzE,KAAO,EACV7R,OAAAqW,EAAA,EAAArW,CAAI8U,EAAoBlJ,EAAY+I,IAE7C,KAAK,EAEH,OADA2B,EAAUzE,KAAO,EACV7R,OAAAqW,EAAA,EAAArW,EAAMmM,KAAMA,EAAMoJ,SAAW3J,WAAYA,EAAY+I,mBAAoBA,KAElF,KAAK,EACL,IAAK,MACH,OAAO2B,EAAUlE,SAGtBsB,EAAU/Q,MAGf,SAASkR,EAAoB0C,GAC3B,IAEI3K,EAAY6I,EAAOC,EAAQrS,EAASmU,EAASC,EAASC,EAAOhK,EAAOiK,EAAUC,EAAYC,EAAQC,EAFlGvB,EAAUgB,EAAMhB,QAIpB,OAAOhE,EAAA5Q,EAAoB+Q,KAAK,SAA8BqF,GAC5D,OACE,OAAQA,EAAUnF,KAAOmF,EAAUlF,MACjC,KAAK,EACHjG,EAAa2J,EAAQ3J,WAAY6I,EAAQc,EAAQd,MAAOC,EAASa,EAAQb,OAAQrS,EAAU5B,EAAyB8U,GAAU,aAAc,QAAS,WAE/Id,EAAM1R,OACVgU,EAAUlF,KAAO,EACjB,MAMJ,KAAK,EAGH,GAFA2E,EAAU/B,EAAM,GAAIgC,EAAUhC,EAAM,GAAIiC,EAAQjC,EAAM,GAElDuC,EAAArW,EAASiP,SAAShE,GAAa,CACjCmL,EAAUlF,KAAO,EACjB,MAIF,OADAkF,EAAUlF,KAAO,EACV7R,OAAAqW,EAAA,EAAArW,CAAKyT,EAAaiD,EAAO9K,EAAY,oCAE9C,KAAK,EACH,OAAOmL,EAAUjF,OAAO,UAE1B,KAAK,EAEH,OADAiF,EAAUlF,KAAO,GACV7R,OAAAqW,EAAA,EAAArW,GAET,KAAK,GAGH,KAFA0M,EAAQqK,EAAUE,MAENC,aAAatL,KAA0D,IAA3Cc,EAAMwK,aAAatL,GAAYoK,QACpE,CACDe,EAAUlF,KAAO,GACjB,MAKF,OAFAoC,EAAM,8CAA+CrI,GAE9CmL,EAAUjF,OAAO,UAE1B,KAAK,GAEH,OADAiF,EAAUlF,KAAO,GACV7R,OAAAqW,EAAA,EAAArW,EAAMmM,KAAMqK,EAASjB,QAASA,IAEvC,KAAK,GAKH,OAJAwB,EAAUnF,KAAO,GAEjBqC,EAAM,uBAAwBrI,GAC9BmL,EAAUlF,KAAO,GACV7R,OAAAqW,EAAA,EAAArW,CAAKsR,EAAiB1F,EAAYvJ,GAE3C,KAAK,GAkBH,OAjBAsU,EAAWI,EAAUE,MAGR,SAAWrL,IAEtBqI,EAAM,oFAAqF0C,EAAS,OAAQ/K,GAC5G+K,EAAS,OAAS/K,GAGpBqI,EAAM,iCAAkCrI,GAExCgL,EAAa5W,OAAAmX,EAAA,EAAAnX,CAAU2W,EAAUjC,GAASmC,EAASD,EAAWC,OAAQC,EAAWF,EAAWE,SAG5F7C,EAAM,iCAAkC4C,GAExCE,EAAUlF,KAAO,GACV7R,OAAAqW,EAAA,EAAArW,CAAK2T,EAAe8C,EAASI,EAAQC,GAE9C,KAAK,GACHC,EAAUlF,KAAO,GACjB,MAEF,KAAK,GAMH,OALAkF,EAAUnF,KAAO,GACjBmF,EAAUK,GAAKL,EAAA,MAAmB,IAElC9C,EAAM,YAAa8C,EAAUK,IAC7BL,EAAUlF,KAAO,GACV7R,OAAAqW,EAAA,EAAArW,CAAKyT,EAAaiD,EAAO9K,EAAYmL,EAAUK,IAExD,KAAK,GACL,IAAK,MACH,OAAOL,EAAU3E,SAGtBwB,EAAUjR,OAAQ,GAAI,MAG3B,SAASoR,EAAuBsD,GAC9B,IAAIC,EAAgBD,EAAM9B,QACT+B,EAAc1L,WACjBnL,EAAyB6W,GAAgB,eAEvD,OAAO/F,EAAA5Q,EAAoB+Q,KAAK,SAAiC6F,GAC/D,OACE,OAAQA,EAAU3F,KAAO2F,EAAU1F,MACjC,KAAK,EACL,IAAK,MACH,OAAO0F,EAAUnF,SAGtB0B,EAAUnR,MAGf,SAAS2H,IACP,OAAOiH,EAAA5Q,EAAoB+Q,KAAK,SAAe8F,GAC7C,OACE,OAAQA,EAAU5F,KAAO4F,EAAU3F,MACjC,KAAK,EAEH,OADA2F,EAAU3F,KAAO,EACV7R,OAAAqW,EAAA,EAAArW,EAAKA,OAAAqW,EAAA,EAAArW,CAAUkU,EAAuBL,GAAsB7T,OAAAqW,EAAA,EAAArW,CAAUmU,EAA+BJ,KAE9G,KAAK,EACL,IAAK,MACH,OAAOyD,EAAUpF,SAGtB4B,EAAUrR,ubC/Tf,MAgDI3C,OAAAyX,EAAA,EAAAzX,GAAA0X,MAAA,aACc,eAAAxX,EAAAmI,UAAAtF,OAAA,QAAAuF,IAAAD,UAAA,GAAAA,UAAA,MAEdsD,EAFctD,UAAAtF,OAAA,QAAAuF,IAAAD,UAAA,GAAAA,UAAA,GA9BO,gBA+BnBwD,EADY3L,EACZ2L,aAAcD,EADF1L,EACE0L,WAAemD,yHADjBtO,CAAAP,GAAA,qCAKZyL,UACAE,eACAD,aACAmD,WATFmC,EAAA,aAYc,SAAAvF,GAAA,OAEZA,YAdFuF,EAAA,2BAiB4B,eAAAjQ,EAAAoH,UAAAtF,OAAA,QAAAuF,IAAAD,UAAA,GAAAA,UAAA,MAC1BwD,EAD0B5K,EAC1B4K,aAAcD,EADY3K,EACZ2K,WAChBD,EAF4BtD,UAAAtF,OAAA,QAAAuF,IAAAD,UAAA,GAAAA,UAAA,GA9CP,gBA8CO,OAK1BsD,UACAE,eACAD,eAxBFsF,EAAA,qBA2BsB,eAAAtN,EAAAyE,UAAAtF,OAAA,QAAAuF,IAAAD,UAAA,GAAAA,UAAA,MACpBwD,EADoBjI,EACpBiI,aAAcD,EADMhI,EACNgI,WADM+L,EAAA/T,EACMgU,iBADNtP,IAAAqP,KAEtBhM,EAFsBtD,UAAAtF,OAAA,QAAAuF,IAAAD,UAAA,GAAAA,UAAA,GAxDD,gBAwDC,OAKpBsD,UACAE,eACAD,aACAgM,cAnCF1G,EAAA,cAsCe,eAACvF,EAADtD,UAAAtF,OAAA,QAAAuF,IAAAD,UAAA,GAAAA,UAAA,GAnEM,gBAmEN,OACasD,YAvC5BuF,EAAA,sBAyCuB,SAACrF,GAAD,IAAeF,EAAftD,UAAAtF,OAAA,QAAAuF,IAAAD,UAAA,GAAAA,UAAA,GAtEF,gBAsEE,OAErBsD,UACAE,iBA5CFqF,EAAA,iBA+CkB,eAACvF,EAADtD,UAAAtF,OAAA,QAAAuF,IAAAD,UAAA,GAAAA,UAAA,GA5EG,gBA4EH,OACUsD,YAhD5BuF,EAAA,uBAkDwB,SACxB2G,EACAC,GAFwB,IAGxBnM,EAHwBtD,UAAAtF,OAAA,QAAAuF,IAAAD,UAAA,GAAAA,UAAA,GA/EH,gBA+EG,OAMtBwP,cACAC,kBACAnM,YA1DFuF,EAAA,0BA6D2B,SAC3B2G,EACAC,GAF2B,IAG3BnM,EAH2BtD,UAAAtF,OAAA,QAAAuF,IAAAD,UAAA,GAAAA,UAAA,GA1FN,gBA0FM,OAMzBwP,cACAC,kBACAnM,YArEFuF,EAAA,wBAwEyB,SAAC2G,GAAD,IAAclM,EAAdtD,UAAAtF,OAAA,QAAAuF,IAAAD,UAAA,GAAAA,UAAA,GArGJ,gBAqGI,OAEvBwP,cACAlM,YA3EFuF,EAAA,kBA8EmB,eAACvF,EAADtD,UAAAtF,OAAA,QAAAuF,IAAAD,UAAA,GAAAA,UAAA,GA3GE,gBA2GF,OAEjBsD,YAhFFuF,EAAA,sBAmFuB,eAACvF,EAADtD,UAAAtF,OAAA,QAAAuF,IAAAD,UAAA,GAAAA,UAAA,GAhHF,gBAgHE,OAErBsD,YArFFuF,EAAA,YAwFa,eAACvF,EAADtD,UAAAtF,OAAA,QAAAuF,IAAAD,UAAA,GAAAA,UAAA,GArHQ,gBAqHR,OAEXsD,YA1FFuF,IAbF6G,gBACAC,gBACAC,4BACAC,sBACAC,gBAEAC,KADAC,oBACAD,gBACAE,yBACAC,4BACAC,0BAGAC,KAFAC,kBACAC,sBACAF,YA+FczY,OAAAyX,EAAA,EAAAzX,GAAA4Y,MAEXb,GAAc,SACbrL,EADa/I,GAAA,IAAAkV,EAAAC,EAAAnV,EAEX4R,QAAW5J,EAFAmN,EAEAnN,QAASE,EAFTiN,EAESjN,aAAcD,EAFvBkN,EAEuBlN,WAAYmD,EAFnC+J,EAEmC/J,OAFnC,OAIbgK,IAAOrM,GACLsM,cAAgBnD,KAAMlK,GACtBmF,aACGnF,IACCkK,MACE1U,GAAIwK,EACJvL,QAAS,EACT6Y,KACErN,GAAcC,IACP1K,GAAIyK,EAAY8I,OAAQ7I,OAEjCqN,qBACAC,cACApK,WAXN8J,MARQ1H,EAyBX6G,GAAc,SAACtL,EAADqB,GAAA,IAAqBpC,EAArBoC,EAAUwH,QAAW5J,QAArB,OACboN,IAAOrM,GACLsM,cACEI,OAAQ,SAAAJ,GAAA,OACNA,IAAiBrN,EAAU,KAAOqN,IAEtClI,MACEsI,OAAQ,SAAAtI,GAGN,OAFAA,EAAKnF,GAAW,YACTmF,EAAKnF,GACZrK,KAAYwP,QAnCRK,EAwCX8G,GAA0B,SACzBvL,EADyB6J,GAAA,IAAA8C,EAAAC,EAAA/C,EAEvBhB,QAAW5J,EAFY2N,EAEZ3N,QAASE,EAFGyN,EAEHzN,aAAcD,EAFX0N,EAEW1N,WAFX,OAIzBmN,IAAOrM,GACLoE,aACGnF,IACCvL,SAAWyV,KAAM,GACjBoD,MAAQpD,OAAS1U,GAAIyK,EAAY8I,OAAQ7I,MAH7CwN,MA7CQlI,EAqDX+G,GAAoB,SACnBxL,EADmB2K,GAAA,IAAAkC,EAAAjC,EAAAD,EAEjB9B,QAAW5J,EAFM2L,EAEN3L,QAASE,EAFHyL,EAEGzL,aAAcD,EAFjB0L,EAEiB1L,WAAYgM,EAF7BN,EAE6BM,UAF7B,OAInBmB,IAAOrM,GACLoE,aACGnF,IACCyN,OAAQ,SAAAtN,GAEN,GACE8L,GACA9L,EAAMmN,KAAK/P,OAAO,SAAA+P,GAAA,OAAQA,EAAK9X,KAAOyK,IAAY7I,OAClD,CACA,IAAMyW,EAAM1N,EAAMmN,KAAKvP,OAAO,SAAC+P,EAAK5H,GAElC,OADA4H,EAAIC,KAAK7H,EAAK1Q,IACPsY,OAGT,OAAOV,IAAOjN,GACZ1L,SAAWyV,KAAM2D,EAAIpG,QAAQxH,MAKjC,GAA0B,IAAtBE,EAAMmN,KAAKlW,OACb,OAAOgW,IAAOjN,GACZ1L,SAAWyV,KAAM,GACjBoD,MAAQpD,OAAS1U,GAAIyK,EAAY8I,OAAQ7I,OAK7C,IACM8N,GADUjN,EAAMoE,KAAKnF,GAASvL,SAAW,GAClB,EACvBwZ,EAAU9N,EAAMmN,KAAKY,MAAM,EAAGF,GAEpC,OADAC,EAAQF,MAAOvY,GAAIyK,EAAY8I,OAAQ7I,IAChCkN,IAAOjN,GACZ1L,SAAWyV,KAAM8D,GACjBV,MAAQpD,KAAM+D,OAjCtBL,MA1DQpI,EAkGXgH,GAAc,SAACzL,EAADoN,GAAA,IAAAC,EAAqBpO,EAArBmO,EAAUvE,QAAW5J,QAArB,OACboN,IAAOrM,GACLoE,aACGnF,IACCvL,SACEgZ,OAAQ,SAAAhZ,GAAA,OAAwB,IAAZA,EAAgB,EAAIA,EAAU,KAHxD2Z,MApGQ5I,EA6GXiH,GAAiB,SAAC1L,EAADsN,GAAA,IAAAC,EAAqBtO,EAArBqO,EAAUzE,QAAW5J,QAArB,OAChBoN,IAAOrM,GACLoE,aACGnF,IACCyN,OAAQ,SAAAtN,GACN,OAAIA,EAAMmN,KAAKlW,OAAS,GAAK+I,EAAM1L,QAC1B0L,EAEFiN,IAAOjN,GACZ1L,SAAWyV,KAAM/J,EAAM1L,QAAU,OAPzC6Z,MA/GQ9I,EA6HXmH,GAAuB,SACtB5L,EADsBwN,GAAA,IAAAC,EAAAC,EAAAC,EAAAH,EAEpB3E,QAAWsC,EAFSwC,EAETxC,YAAaC,EAFJuC,EAEIvC,gBAAiBnM,EAFrB0O,EAEqB1O,QAFrB,OAItBoN,IAAOrM,GACLoE,aACGnF,IACCuN,mBACEE,OAAQ,SAAAF,GAAA,OACsC,IAA5CA,EAAkB9F,QAAQyE,MAA1BjO,OACQsP,GAAmBrB,IACvBqB,IAERC,mBACGtB,IAAgBhC,KAAMiC,GADzBqC,IARJC,MAlIQjJ,EAiJXoH,GAA0B,SACzB7L,EADyB4N,GAAA,IAAAC,EAAAC,EAAAC,EAAAH,EAEvB/E,QAAWsC,EAFY4C,EAEZ5C,YAAaC,EAFD2C,EAEC3C,gBAAiBnM,EAFlB8O,EAEkB9O,QAFlB,OAIzBoN,IAAOrM,GACLoE,aACGnF,IACCwN,mBACGtB,IAAgB6C,OAAQ5C,GAD3ByC,IAFJC,MAtJQrJ,EA+JXqH,GAAwB,SAAC9L,EAADiO,GAAA,IAAAC,EAAAC,EAAAF,EAAUpF,QAAWsC,EAArBgD,EAAqBhD,YAAalM,EAAlCkP,EAAkClP,QAAlC,OACvBoN,IAAOrM,GACLoE,aACGnF,IACCuN,mBACEE,OAAQ,SAAAF,GAAA,OACNA,EAAkBxP,OAAO,SAAC+P,EAAKqB,GAI7B,OAHIA,IAAQjD,GACV4B,EAAIC,KAAKoB,GAEJrB,UARjBmB,MAjKQzJ,EAgLXsH,GAAa,SAAC/L,EAADqO,GAAA,IAAqBpP,EAArBoP,EAAUxF,QAAW5J,QAArB,OACZoN,IAAOrM,GACLsM,cAAgBnD,KAAMlK,MAlLdwF,IA/HdL,QACAkI,aAAc,+DCpBhB7U,EAAA,EAWe,SAAmCoC,GAChD,GAA0B,gBAAtBA,EAAS,UAA8BA,EAASe,aAEhB,IAA9Bf,EAASY,UAAUpE,OACrB,OAAOzB,KAAaiF,GAClBe,YAAa,KACbH,WAAY7F,KAAaiF,EAASY,UAAU,IAC1CG,YAAaf,EAASe,iBAO9B,OAAOf,GAzBT,IAAIjF,EAAWtB,OAAOgb,QAAU,SAAUxZ,GAAU,IAAK,IAAI2R,EAAI,EAAGA,EAAI9K,UAAUtF,OAAQoQ,IAAK,CAAE,IAAI8H,EAAS5S,UAAU8K,GAAI,IAAK,IAAIrR,KAAOmZ,EAAcjb,OAAOqT,UAAUC,eAAeC,KAAK0H,EAAQnZ,KAAQN,EAAOM,GAAOmZ,EAAOnZ,IAAY,OAAON,2ECGnP0Z,EAAkCvS,IAAQ,SAAUS,EAAUP,GAChE,OAAKO,EAGmB,iBAAbA,IACCC,YAAaR,EAAiBS,SAAUtJ,OAAAuJ,EAAA,EAAAvJ,CAAeoJ,KAE/D5D,MAAMsD,QAAQM,GACT,KAELA,EAAS,WACXA,EAAS,UAAYpJ,OAAAuJ,EAAA,EAAAvJ,CAAeoJ,EAAS,YAErCA,IAGDpJ,OAAOkT,KAAK9J,GAAUM,OAAO,SAAU+P,EAAK0B,GACjD,OAAI3V,MAAMsD,QAAQM,EAAS+R,OACfvR,OAAO6P,EAAKrQ,EAAS+R,GAAUna,IAAI,SAAUI,GACrD,OACEiI,YAA0B,UAAb8R,EAAuBtS,EAAkBsS,EACtD7R,SAAUtJ,OAAAuJ,EAAA,EAAAvJ,CAAeoB,UAIrBwI,OAAO6P,IACfpQ,YAA0B,UAAb8R,EAAuBtS,EAAkBsS,EACtD7R,SAAUtJ,OAAAuJ,EAAA,EAAAvJ,CAAeoJ,EAAS+R,YAzB/B,OA+BXhX,EAAA,+EC/BIiX,GAASC,EAAA,EAAkBC,EAAA,EAAgBC,EAAA,GAE/CpX,EAAA,2GCLI+M,EAAiBC,cAFrBqK,EAAAnX,EAAA,QAAA0U,EAAA1U,EAAAoX,EAAAD,GAAIla,EAAWtB,OAAOgb,QAAU,SAAUxZ,GAAU,IAAK,IAAI2R,EAAI,EAAGA,EAAI9K,UAAUtF,OAAQoQ,IAAK,CAAE,IAAI8H,EAAS5S,UAAU8K,GAAI,IAAK,IAAIrR,KAAOmZ,EAAcjb,OAAOqT,UAAUC,eAAeC,KAAK0H,EAAQnZ,KAAQN,EAAOM,GAAOmZ,EAAOnZ,IAAY,OAAON,GAUvP,IAmBIka,EAAmB,gBAiBnBtH,EAAiBpU,OAAAyX,EAAA,EAAAzX,GAAekR,MAAsB,aAAgC,WACxF,IAAIhR,EAAOmI,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,MAEtEsD,EAAUtD,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,GAAKqT,EAE9E7P,EAAe3L,EAAK2L,aACpBD,EAAa1L,EAAK0L,WAClBmD,EAjDN,SAAkCkE,EAAKC,GAAQ,IAAI1R,KAAa,IAAK,IAAI2R,KAAKF,EAAWC,EAAKE,QAAQD,IAAM,GAAkBnT,OAAOqT,UAAUC,eAAeC,KAAKN,EAAKE,KAAc3R,EAAO2R,GAAKF,EAAIE,IAAM,OAAO3R,EAiDpMf,CAAyBP,GAAO,eAAgB,eAE7D,OACEyL,QAASA,EACTE,aAAcA,EACdD,WAAYA,EACZmD,OAAQA,IAETmC,EAAA,aAAgC,SAAUvF,GAC3C,OACEA,QAASA,IAEVuF,EAAA,2BAA8C,WAC/C,IAAIjQ,EAAQoH,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,MACvEwD,EAAe5K,EAAM4K,aACrBD,EAAa3K,EAAM2K,WAEnBD,EAAUtD,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,GAAKqT,EAClF,OACE/P,QAASA,EACTE,aAAcA,EACdD,WAAYA,IAEbsF,EAAA,qBAAwC,WACzC,IAAItN,EAAQyE,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,MACvEwD,EAAejI,EAAMiI,aACrBD,EAAahI,EAAMgI,WACnB+L,EAAkB/T,EAAMgU,UACxBA,OAAgCtP,IAApBqP,GAAuCA,EAEnDhM,EAAUtD,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,GAAKqT,EAClF,OACE/P,QAASA,EACTE,aAAcA,EACdD,WAAYA,EACZgM,UAAWA,IAEZ1G,EAAA,cAAiC,WAClC,IAAIvF,EAAUtD,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,GAAKqT,EAClF,OAAmC/P,QAASA,IAC3CuF,EAAA,sBAAyC,SAAUrF,GACpD,IAAIF,EAAUtD,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,GAAKqT,EAClF,OACE/P,QAASA,EACTE,aAAcA,IAEfqF,EAAA,iBAAoC,WACrC,IAAIvF,EAAUtD,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,GAAKqT,EAClF,OAAmC/P,QAASA,IAC3CuF,EAAA,uBAA0C,SAAU2G,EAAaC,GAClE,IAAInM,EAAUtD,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,GAAKqT,EAClF,OACE7D,YAAaA,EACbC,gBAAiBA,EACjBnM,QAASA,IAEVuF,EAAA,0BAA6C,SAAU2G,EAAaC,GACrE,IAAInM,EAAUtD,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,GAAKqT,EAClF,OACE7D,YAAaA,EACbC,gBAAiBA,EACjBnM,QAASA,IAEVuF,EAAA,wBAA2C,SAAU2G,GACtD,IAAIlM,EAAUtD,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,GAAKqT,EAClF,OACE7D,YAAaA,EACblM,QAASA,IAEVuF,EAAA,kBAAqC,WACtC,IAAIvF,EAAUtD,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,GAAKqT,EAClF,OACE/P,QAASA,IAEVuF,EAAA,sBAAyC,WAC1C,IAAIvF,EAAUtD,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,GAAKqT,EAClF,OACE/P,QAASA,IAEVuF,EAAA,YAA+B,WAChC,IAAIvF,EAAUtD,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,GAAKqT,EAClF,OACE/P,QAASA,IAEVuF,IACC6G,EAAc3D,EAAe2D,YAC7BC,EAAc5D,EAAe4D,YAC7BC,EAA0B7D,EAAe6D,wBACzCC,EAAoB9D,EAAe8D,kBACnCC,EAAc/D,EAAe+D,YAE7BC,GADoBhE,EAAeiE,kBAClBjE,EAAegE,gBAChCE,EAAuBlE,EAAekE,qBACtCC,EAA0BnE,EAAemE,wBACzCC,EAAwBpE,EAAeoE,sBAGvCC,GAFkBrE,EAAesE,gBACXtE,EAAeuE,oBACxBvE,EAAeqE,YAE5BkD,EAAU3b,OAAAyX,EAAA,EAAAzX,GAAemR,MAAoC4G,GAAe,SAAUrL,EAAO/I,GAC/F,IAAIkV,EAEAC,EAAgBnV,EAAM4R,QACtB5J,EAAUmN,EAAcnN,QACxBE,EAAeiN,EAAcjN,aAC7BD,EAAakN,EAAclN,WAC3BmD,EAAS+J,EAAc/J,OAC3B,OAAOgK,IAAOrM,GACZsM,cAAgBnD,KAAMlK,GACtBmF,MAAO+H,KAAYA,EAAMlN,IACvBkK,MACE1U,GAAIwK,EACJvL,QAAS,EACT6Y,KAAMrN,GAAcC,IAAkB1K,GAAIyK,EAAY8I,OAAQ7I,OAC9DqN,qBACAC,cACApK,OAAQA,IAET8J,MAEJ1H,EAAe6G,GAAe,SAAUtL,EAAOqB,GAChD,IAAIpC,EAAUoC,EAAMwH,QAAQ5J,QAC5B,OAAOoN,IAAOrM,GACZsM,cACEI,OAAQ,SAAgBJ,GACtB,OAAOA,IAAiBrN,EAAU,KAAOqN,IAG7ClI,MACEsI,OAAQ,SAAgBtI,GAGtB,OAFAA,EAAKnF,GAAW,YACTmF,EAAKnF,GACLrK,KAAawP,QAIzBK,EAAe8G,GAA2B,SAAUvL,EAAO6J,GAC5D,IAAI8C,EAEAC,EAAgB/C,EAAMhB,QACtB5J,EAAU2N,EAAc3N,QACxBE,EAAeyN,EAAczN,aAC7BD,EAAa0N,EAAc1N,WAC/B,OAAOmN,IAAOrM,GACZoE,MAAOuI,KAAaA,EAAO1N,IACzBvL,SAAWyV,KAAM,GACjBoD,MAAQpD,OAAS1U,GAAIyK,EAAY8I,OAAQ7I,MACxCwN,MAEJlI,EAAe+G,GAAqB,SAAUxL,EAAO2K,GACtD,IAAIkC,EAEAjC,EAAgBD,EAAM9B,QACtB5J,EAAU2L,EAAc3L,QACxBE,EAAeyL,EAAczL,aAC7BD,EAAa0L,EAAc1L,WAC3BgM,EAAYN,EAAcM,UAC9B,OAAOmB,IAAOrM,GACZoE,MAAOyI,KAAaA,EAAO5N,IACzByN,OAAQ,SAAgBtN,GAEtB,GAAI8L,GAAa9L,EAAMmN,KAAK/P,OAAO,SAAU+P,GAC3C,OAAOA,EAAK9X,KAAOyK,IAClB7I,OAAQ,CACT,IAAIyW,EAAM1N,EAAMmN,KAAKvP,OAAO,SAAU+P,EAAK5H,GAEzC,OADA4H,EAAIC,KAAK7H,EAAK1Q,IACPsY,OAGT,OAAOV,IAAOjN,GACZ1L,SAAWyV,KAAM2D,EAAIpG,QAAQxH,MAKjC,GAA0B,IAAtBE,EAAMmN,KAAKlW,OACb,OAAOgW,IAAOjN,GACZ1L,SAAWyV,KAAM,GACjBoD,MAAQpD,OAAS1U,GAAIyK,EAAY8I,OAAQ7I,OAK7C,IACI8N,GADUjN,EAAMoE,KAAKnF,GAASvL,SAAW,GAClB,EACvBwZ,EAAU9N,EAAMmN,KAAKY,MAAM,EAAGF,GAElC,OADAC,EAAQF,MAAOvY,GAAIyK,EAAY8I,OAAQ7I,IAChCkN,IAAOjN,GACZ1L,SAAWyV,KAAM8D,GACjBV,MAAQpD,KAAM+D,OAGjBL,MAEJpI,EAAegH,GAAe,SAAUzL,EAAOoN,GAChD,IAAIC,EAEApO,EAAUmO,EAAMvE,QAAQ5J,QAC5B,OAAOoN,IAAOrM,GACZoE,MAAOiJ,KAAaA,EAAOpO,IACzBvL,SACEgZ,OAAQ,SAAgBhZ,GACtB,OAAmB,IAAZA,EAAgB,EAAIA,EAAU,KAGxC2Z,MAEJ5I,EAAeiH,GAAkB,SAAU1L,EAAOsN,GACnD,IAAIC,EAEAtO,EAAUqO,EAAMzE,QAAQ5J,QAC5B,OAAOoN,IAAOrM,GACZoE,MAAOmJ,KAAaA,EAAOtO,IACzByN,OAAQ,SAAgBtN,GACtB,OAAIA,EAAMmN,KAAKlW,OAAS,GAAK+I,EAAM1L,QAC1B0L,EAEFiN,IAAOjN,GACZ1L,SAAWyV,KAAM/J,EAAM1L,QAAU,OAGpC6Z,MAEJ9I,EAAemH,GAAwB,SAAU5L,EAAOwN,GACzD,IAAIC,EAAaC,EAEbC,EAAiBH,EAAO3E,QACxBsC,EAAcwC,EAAexC,YAC7BC,EAAkBuC,EAAevC,gBACjCnM,EAAU0O,EAAe1O,QAC7B,OAAOoN,IAAOrM,GACZoE,MAAOsJ,KAAaA,EAAOzO,IACzBuN,mBACEE,OAAQ,SAAgBF,GACtB,OAAmD,IAA5CA,EAAkB9F,QAAQyE,MAAyBjO,OAAOsP,GAAoBrB,IAAgBqB,IAGzGC,YAAagB,KAAkBA,EAAYtC,IAAiBhC,KAAMiC,GAAmBqC,IACpFC,MAEJjJ,EAAeoH,GAA2B,SAAU7L,EAAO4N,GAC5D,IAAIC,EAAcC,EAEdC,EAAiBH,EAAO/E,QACxBsC,EAAc4C,EAAe5C,YAC7BC,EAAkB2C,EAAe3C,gBACjCnM,EAAU8O,EAAe9O,QAC7B,OAAOoN,IAAOrM,GACZoE,MAAO0J,KAAaA,EAAO7O,IACzBwN,YAAaoB,KAAmBA,EAAa1C,IAAiB6C,OAAQ5C,GAAmByC,IACxFC,MAEJrJ,EAAeqH,GAAyB,SAAU9L,EAAOiO,GAC1D,IAAIC,EAEAC,EAAiBF,EAAOpF,QACxBsC,EAAcgD,EAAehD,YAC7BlM,EAAUkP,EAAelP,QAC7B,OAAOoN,IAAOrM,GACZoE,MAAO8J,KAAaA,EAAOjP,IACzBuN,mBACEE,OAAQ,SAAgBF,GACtB,OAAOA,EAAkBxP,OAAO,SAAU+P,EAAKqB,GAI7C,OAHIA,IAAQjD,GACV4B,EAAIC,KAAKoB,GAEJrB,UAIZmB,MAEJzJ,EAAesH,GAAc,SAAU/L,EAAOqO,GAC/C,IAAIpP,EAAUoP,EAAOxF,QAAQ5J,QAC7B,OAAOoN,IAAOrM,GACZsM,cAAgBnD,KAAMlK,MAEvBwF,IAjTDL,QACAkI,aAAc,8CCrBD,SAAuB4C,GAMpC,OALAC,IAASD,GAAQpQ,QAAQ,SAAUyH,GACX,kBAAjBA,EAAI,UAAiD,gBAAjBA,EAAI,UAA+C,cAAjBA,EAAI,UAA8BA,EAAI,QAC/GtQ,KAAKmZ,OAAOxa,KAAa2R,GAAOpD,MAAO,WAAakM,IAAK9I,QAGtD2I,4BAXTI,EAAA3X,EAAA,QAAA0X,EAAA1X,EAAAoX,EAAAO,GAAI1a,EAAWtB,OAAOgb,QAAU,SAAUxZ,GAAU,IAAK,IAAI2R,EAAI,EAAGA,EAAI9K,UAAUtF,OAAQoQ,IAAK,CAAE,IAAI8H,EAAS5S,UAAU8K,GAAI,IAAK,IAAIrR,KAAOmZ,EAAcjb,OAAOqT,UAAUC,eAAeC,KAAK0H,EAAQnZ,KAAQN,EAAOM,GAAOmZ,EAAOnZ,IAAY,OAAON,+JCAnP2P,cAAJqK,EAAAnX,EAAA,QAAA0U,EAAA1U,EAAAoX,EAAAD,GAuBIS,EAA4B,4BAM5BC,EAA0B,0BA2D1BC,EAAmBnc,OAAAyX,EAAA,EAAAzX,CAAaic,GAGhCG,GAFiBpc,OAAAyX,EAAA,EAAAzX,CAjES,2BAkELA,OAAAyX,EAAA,EAAAzX,CAjES,+BAkETA,OAAAyX,EAAA,EAAAzX,CAjES,gCAkE9Bqc,EAAiBrc,OAAAyX,EAAA,EAAAzX,CAAakc,GAG9BI,GAFetc,OAAAyX,EAAA,EAAAzX,CA/DS,yBAgELA,OAAAyX,EAAA,EAAAzX,CA/DS,6BAgETA,OAAAyX,EAAA,EAAAzX,CA/DS,8BAgE5Buc,EAAiBvc,OAAAyX,EAAA,EAAAzX,CA7DS,2BAgE1Bwc,GAFexc,OAAAyX,EAAA,EAAAzX,CA7DS,yBA8DLA,OAAAyX,EAAA,EAAAzX,CA7DS,6BA8DTA,OAAAyX,EAAA,EAAAzX,CA7DS,8BA8D5Byc,EAAezc,OAAAyX,EAAA,EAAAzX,CA3DS,yBA8DxB0c,GAFa1c,OAAAyX,EAAA,EAAAzX,CA3DS,uBA4DLA,OAAAyX,EAAA,EAAAzX,CA3DS,2BA4DTA,OAAAyX,EAAA,EAAAzX,CA3DS,4BA4D1B2c,EAAuB3c,OAAAyX,EAAA,EAAAzX,CAzDU,kCA4DjC4c,GAFqB5c,OAAAyX,EAAA,EAAAzX,CAzDU,gCA0DNA,OAAAyX,EAAA,EAAAzX,CAzDU,oCA0DVA,OAAAyX,EAAA,EAAAzX,CAzDU,qCA0DnC6c,EAAmB7c,OAAAyX,EAAA,EAAAzX,CAvDS,6BA0D5B8c,GAFiB9c,OAAAyX,EAAA,EAAAzX,CAvDS,2BAwDLA,OAAAyX,EAAA,EAAAzX,CAvDS,+BAwDTA,OAAAyX,EAAA,EAAAzX,CAvDS,gCAwD9B+c,EAAc/c,OAAAyX,EAAA,EAAAzX,CArDS,wBAwDvBgd,GAFYhd,OAAAyX,EAAA,EAAAzX,CArDS,sBAsDLA,OAAAyX,EAAA,EAAAzX,CArDS,0BAsDTA,OAAAyX,EAAA,EAAAzX,CArDS,2BAsDzBid,EAAcjd,OAAAyX,EAAA,EAAAzX,CAnDS,wBAsDvBkd,GAFYld,OAAAyX,EAAA,EAAAzX,CAnDS,sBAoDLA,OAAAyX,EAAA,EAAAzX,CAnDS,0BAoDTA,OAAAyX,EAAA,EAAAzX,CAnDS,2BAoDzBmd,EAAsBnd,OAAAyX,EAAA,EAAAzX,CAjDU,iCAoDhCod,GAFoBpd,OAAAyX,EAAA,EAAAzX,CAjDU,+BAkDNA,OAAAyX,EAAA,EAAAzX,CAjDU,mCAkDVA,OAAAyX,EAAA,EAAAzX,CAjDU,oCAmDlCqd,EAAgB,SAAuB9W,GACzC,OAAO,SAAUmG,EAAOxM,GACtB,IAAIwV,EAEAH,EAAUrV,EAAKqV,QACnB,OAAOwD,IAAOrM,IAAQgJ,MAAsB,UAAYnP,IAAcsP,KAAMN,EAAQpU,IAAMuU,MAI1F4H,EAAkB,SAAyB/W,GAC7C,OAAO,SAAUmG,GACf,IAAIuJ,EAEJ,OAAO8C,IAAOrM,IAAQuJ,MAAwB,UAAY1P,IAAcsP,KAAM,MAAQI,MAItF0F,EAAU3b,OAAAyX,EAAA,EAAAzX,GAAemR,MAAoCgL,GAAoBkB,EAAc,cAAelM,EAAeiL,GAAsBkB,EAAgB,cAAenM,EAAekL,GAAkBgB,EAAc,YAAalM,EAAemL,GAAoBgB,EAAgB,YAAanM,EAAeoL,GAAkBc,EAAc,YAAalM,EAAeqL,GAAoBc,EAAgB,YAAanM,EAAesL,GAAgBY,EAAc,UAAWlM,EAAeuL,GAAkBY,EAAgB,UAAWnM,EAAewL,GAAwBU,EAAc,kBAAmBlM,EAAeyL,GAA0BU,EAAgB,kBAAmBnM,EAAe0L,GAAoBQ,EAAc,cAAelM,EAAe2L,GAAsBQ,EAAgB,cAAenM,EAAe4L,GAAeM,EAAc,SAAUlM,EAAe6L,GAAiBM,EAAgB,SAAUnM,EAAe8L,GAAeI,EAAc,SAAUlM,EAAe+L,GAAiBI,EAAgB,SAAUnM,EAAegM,GAAuBE,EAAc,iBAAkBlM,EAAeiM,GAAyBE,EAAgB,iBAAkBnM,IAjExqCoM,gBAAiB,KACjBC,gBAAiB,KACjBC,cAAe,KACfC,sBAAuB,KACvBC,kBAAmB,KACnBC,aAAc,KACdC,aAAc,KACdC,qBAAsB,KACtBC,kBAAmB,mEC3ErB5Z,EAAA,EARqB,SAAS6Z,EAAeC,GAC3C,IAAIC,EAAU7V,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,IAAM,IAAK,IAAK,KAAM,IAAK,MAAO,KAC3G8V,EAAc9V,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GACtF,OAAO7C,MAAMsD,QAAQmV,GAAOA,EAAIjd,IAAI,SAAU6P,GAC5C,OAAOmN,EAAenN,EAAGqN,EAASC,KAC/BC,IAAUH,EAAKC,EAASC,qFCJ3BE,EAAkC1V,IAAQ,SAAUS,GACtD,OAAKA,EAGDA,EAAS,WAAaA,EAAS,QAEzBA,GAEc,iBAAbA,EACJkV,EAAA3d,EAASiP,SAASxG,KAGbyG,MAAOzG,IAFR,KAIP5D,MAAMsD,QAAQM,GACTiV,EAAgCjV,EAAS,IAE3C,KAfE,OAkBXjF,EAAA,0KCjBcE,EAAQ,OAARA,CAAiB,cAG3BmG,OAAO+T,aAYTC,QAAQC,IAAR,mCAEM,2CAAiB5E,MAAM,EAAG,GAFhC,KAMF,IAAM5P,EAAQjK,OAAA0e,EAAA,EAAA1e,GAEdA,OAAA2e,EAAA,OAAA3e,CACEqM,EAAA1L,EAAAC,cAACwN,EAAA,GAASnE,MAAOA,GACfoC,EAAA1L,EAAAC,cAACge,EAAA,EAAD,OAEFC,SAASC,cAAc,yGCUzB3a,EAAA,EAtC+B,SAAkC/C,GAmC/D,OAlCA2d,IAAS3d,GAAOoK,QAAQ,SAAUwT,GAChC,OAAQrc,KAAKb,KAEX,IAAK,QACL,IAAK,cACL,IAAK,cACHa,KAAKmZ,OAAO9b,OAAAiJ,EAAA,EAAAjJ,CAA0Bgf,EAAY,OAClD,MAEF,IAAK,WACHrc,KAAKmZ,OAAO9b,OAAAif,EAAA,EAAAjf,CAA0Bgf,EAAY,OAClD,MAEF,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,YACL,IAAK,SACHrc,KAAKmZ,OAAO9b,OAAAkf,EAAA,EAAAlf,CAAyBgf,IACrC,MAEF,IAAK,cACL,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,OACH,IAAIG,EAAkBnf,OAAAkf,EAAA,EAAAlf,CAAyBgf,GAC/Crc,KAAKmZ,OAAOqD,GAAmBA,EAAgBpc,OAASoc,EAAgB,GAAK,SAO5E/d,qPCxCTge,EAAA/a,EAAA,QAMIyH,EAAQ,SAAe6E,GAEzB,IAAIhC,EAAQ3O,OAAAqf,EAAA,eAAArf,CAAe2Q,EAAU,SAAU2O,GAC7C,OAAOA,EAAane,KAElBoe,EAAYvf,OAAAqf,EAAA,eAAArf,CAAe2O,EAAO,SAAUjC,GAC9C,OAAOA,EAAM8S,OAAOxG,cACnB,SAAUyG,EAAgBC,GAC3B,OAAOA,IAAmBD,IAOxBE,EAAiB3f,OAAAqf,EAAA,eAAArf,CAAe2Q,EAAU,SAAU2O,GACtD,OAAOA,EAAarG,OAElB2G,EAAsB5f,OAAAqf,EAAA,eAAArf,CAAe2Q,EAAU,SAAU2O,GAC3D,OAAOA,EAAalf,UAElByf,EAAqB7f,OAAAqf,EAAA,eAAArf,CAAe2f,EAAgBC,EAAqB,SAAUE,EAAaC,GAClG,OAAOD,EAAYC,KAEjBvR,EAAuBxO,OAAAqf,EAAA,eAAArf,CAAe6f,EAAoB,SAAUlS,GACtE,OAAOA,EAAkBA,EAAgBxM,GAAK,OAE5CsN,EAAyBzO,OAAAqf,EAAA,eAAArf,CAAe6f,EAAoB,SAAUlS,GACxE,OAAOA,EAAkBA,EAAgB+G,OAAS,OAEhDsL,EAA2BrX,IAAQ,SAAU+L,GAC/C,OAAO1U,OAAAqf,EAAA,eAAArf,CAAe2f,EAAgB,SAAU1G,GAC9C,OAAOA,EAAKvP,OAAO,SAAU+P,EAAK5H,GAChC,OAAOA,EAAK6C,SAAWA,EAAS7C,EAAO4H,GACtC,UAKHwG,EAAcjgB,OAAAqf,EAAA,eAAArf,CAAe2f,EAAgB,SAAUG,GACzD,OAAOA,EAAY,IAAM,OAEvBI,EAAclgB,OAAAqf,EAAA,eAAArf,CAAe2f,EAAgB,SAAUG,GACzD,OAAOA,EAAYpW,OAAO,SAAU+K,EAAOwE,GAIzC,OAHoC,IAAhCxE,EAAMrB,QAAQ6F,EAAKvE,SACrBD,EAAMiF,KAAKT,EAAKvE,QAEXD,SAGP0L,EAAYngB,OAAAqf,EAAA,eAAArf,CAAe4f,EAAqB,SAAUQ,GAC5D,OAAOA,EAAY,IAEjBC,EAAergB,OAAAqf,EAAA,eAAArf,CAAe2f,EAAgBC,EAAqB,SAAUE,EAAaC,GAC5F,OAA8B,IAAvBD,EAAY/c,QAAuB+c,EAAY/c,OAAS,EAAIgd,IAEjEO,EAAatgB,OAAAqf,EAAA,eAAArf,CAAe2f,EAAgBC,EAAqB,SAAUE,EAAaC,GAC1F,OAAOD,EAAY/c,OAAS+c,EAAYjG,MAAM,EAAGkG,QAE/CQ,EAAiBZ,EACjBa,EAAkB7X,IAAQ,SAAU+L,GACtC,OAAO1U,OAAAqf,EAAA,eAAArf,CAAesgB,EAAY,SAAUG,GAC1C,OAAOA,EAAQvX,OAAO,SAAUwX,GAC9B,OAAOA,EAAShM,SAAWA,IAC1B3R,OAAS,MAKZ4d,EAA2B3gB,OAAAqf,EAAA,eAAArf,CAAe2Q,EAAU,SAAU2O,GAChE,OAAOA,EAAanG,aAElByH,EAAqB5gB,OAAAqf,EAAA,eAAArf,CAAe2Q,EAAU,SAAU2O,GAC1D,OAAOtf,OAAOkT,KAAKoM,EAAanG,cAE9B0H,EAAqB,SAA4BnU,EAAOoU,EAAe3f,GACzE,OAAK2f,EAAc3f,GAGc,iBAAtB2f,EAAc3f,IAAoBuL,EAAMvL,IAAOuL,EAAMvL,GAAI2f,EAAc3f,KACvEA,GAAIA,EAAI4N,OAAQrC,EAAMvL,GAAI2f,EAAc3f,MAE1CA,GAAIA,EAAI4N,OAAQ+R,EAAc3f,KAL5BA,GAAIA,IAOb4f,EAAmB/gB,OAAAqf,EAAA,eAAArf,CAAe4gB,EAAoBD,EAA0B,SAAUjU,GAC5F,OAAOA,GACN,SAAUsU,EAAcF,EAAepU,GACxC,OAAOsU,EAAahgB,IAAI,SAAUG,GAChC,OAAO0f,EAAmBnU,EAAOoU,EAAe3f,OAWhD8f,EAAyBjhB,OAAAqf,EAAA,eAAArf,CAAe2Q,EAAU,SAAU2O,GAC9D,OAAOA,EAAapG,oBAElBgI,EAAqBvY,IAAQ,SAAUxH,GACzC,OAAOnB,OAAAqf,EAAA,eAAArf,CAAeihB,EAAwB,SAAU/H,GACtD,OAA0C,IAAnCA,EAAkB9F,QAAQjS,OAGjCggB,EAA0BnhB,OAAAqf,EAAA,eAAArf,CAAe4gB,EAAoBK,EAAwB,SAAUG,EAAiBC,GAClH,OAAOD,EAAgB1X,OAAO,SAAU4X,EAAUxG,GAIhD,OAH0C,IAAtCuG,EAAoBjO,QAAQ0H,IAC9BwG,EAAS5H,KAAKoB,GAETwG,SAGPC,EAAwBvhB,OAAAqf,EAAA,eAAArf,CAAemhB,EAAyBR,EAA0B,SAAUjU,GACtG,OAAOA,GACN,SAAUsU,EAAcF,EAAepU,GACxC,OAAOsU,EAAahgB,IAAI,SAAUG,GAChC,OAAO0f,EAAmBnU,EAAOoU,EAAe3f,OAGhD0N,EAAuB7O,OAAAqf,EAAA,eAAArf,CAAeihB,EAAwBN,EAA0B,SAAUjU,GACpG,OAAOA,GACN,SAAUsU,EAAcF,EAAepU,GACxC,OAAOsU,EAAahgB,IAAI,SAAUG,GAChC,OAAO0f,EAAmBnU,EAAOoU,EAAe3f,OAapD,OAEEwN,MAAOA,EACP4Q,UAAWA,EAGXI,eAAgBA,EAChBC,oBAAqBA,EACrBC,mBAAoBA,EACpBrR,qBAAsBA,EACtBC,uBAAwBA,EACxBuR,yBAA0BA,EAG1BC,YAAaA,EACbC,YAAaA,EACbC,UAAWA,EACXE,aAAcA,EACdC,WAAYA,EACZC,eAAgBA,EAChBC,gBAAiBA,EAGjBI,mBAAoBA,EACpBG,iBAAkBA,EAClBjS,iBAzEqB,SAA0B3N,GAC/C,OAAOnB,OAAAqf,EAAA,eAAArf,CAAe2gB,EAA0B,SAAUjU,GACxD,OAAOA,GACN,SAAUoU,EAAepU,GAC1B,OAAOmU,EAAmBnU,EAAOoU,EAAe3f,MAsElD+f,mBAAoBA,EACpBK,sBAAuBA,EACvB1S,qBAAsBA,IAoCf2S,GApBoB7Y,IAAQ,SAAU8Y,GAC/C,IACIC,GADOrZ,UAAUtF,OAAS,QAAsBuF,IAAjBD,UAAU,GAAmBA,UAAU,OACpDsG,MAClBA,OAAuBrG,IAAfoZ,EAA2B,KAAOA,EAE9C,OAAO,SAAUhV,EAAOlM,GACtB,IAAIW,EAAKwN,EAAQA,EAAMjC,EAAOlM,GAASA,EAAQA,EAAMmL,QAAUgW,EAAA,EAE3DC,EAAsBH,EAAS3V,EAAM,SAAU+E,GACjD,OAAOA,EAAE2O,OAAO1O,KAAK3P,MAGvB,OAAQygB,GAAiE,yBAAvCC,SAAStO,KAAKqO,GAA+C,SAAUjR,GACvG,OAAO,SAAUmR,GACf,OAAOnR,EAASmR,KAEhBzC,EAAA,0BAA0BuC,EAJvB,CAI4ClV,MAIxB,SAA2BA,GACxD,OAAOA,EAAM8S,OAAOxG,eAGX+I,EAAe,SAAsBrV,GAC9C,OAAOA,EAAM8S,OAAO1O,MAGXkR,EAAiBhiB,OAAAqf,EAAA,eAAArf,CAAe+hB,EAAc,SAAUvC,GACjE,OAAOxf,OAAOkT,KAAKsM,KAGVyC,EAAkBjiB,OAAAqf,EAAA,eAAArf,CAAewhB,EAAmBO,EAAc,SAAU5gB,EAAIqe,GACzF,OAAOA,EAAOre,KAGL6X,EAAe,SAAsBzK,GAC9C,OAAO,SAAU7B,EAAOlM,GAEtB,OADqBghB,EAAkB9U,GAIhC1M,OAAAqf,EAAA,yBAAArf,CAAyBuO,EAAIzC,EAAMmW,IAAnCjiB,CAAsD0M,EAAOlM,GAF3D,OAMFgf,EAASxf,OAAAof,EAAA,EAAApf,CAA4B+hB,EAAcjW,6bCzO1D0H,EAAuBjC,EAAA5Q,EAAoB6Q,KAAK0Q,GAChDxO,EAAwBnC,EAAA5Q,EAAoB6Q,KAAKlH,GAOjD6X,EAAmB,mBACnBC,EAAmB,mBACnBC,EAAiB,iBAErB,SAASH,EAAchiB,GACrB,IAAIiB,EAAKjB,EAAKqV,QAAQpU,GACtB,OAAOoQ,EAAA5Q,EAAoB+Q,KAAK,SAAwBC,GACtD,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAEH,OADAF,EAASE,KAAO,EACT7R,OAAAsiB,EAAA,EAAAtiB,CAAIA,OAAAuiB,EAAA,EAAAviB,CAAoBmB,GAAKghB,EAAkBC,EAAkBC,GAAiBG,EAAA,IAE3F,KAAK,EACL,IAAK,MACH,OAAO7Q,EAASS,SAGrBoB,EAAS7Q,MAGd,SAAS2H,IACP,OAAOiH,EAAA5Q,EAAoB+Q,KAAK,SAAe0E,GAC7C,OACE,OAAQA,EAAUxE,KAAOwE,EAAUvE,MACjC,KAAK,EAEH,OADAuE,EAAUvE,KAAO,EACV7R,OAAAsiB,EAAA,EAAAtiB,EAAKA,OAAAsiB,EAAA,EAAAtiB,CAAUyiB,EAAA,EAAyBP,KAEjD,KAAK,EACL,IAAK,MACH,OAAO9L,EAAUhE,SAGtBsB,EAAU/Q,mJC1CX6Q,EAAuBjC,EAAA5Q,EAAoB6Q,KAAKkR,GAChDhP,EAAwBnC,EAAA5Q,EAAoB6Q,KAAKlH,GAsBjDqY,EAAqB,qBACrBC,EAAqB,qBACrBC,EAAmB,mBAEvB,SAASH,EAAgBxiB,GACvB,IAAIiB,EAAKjB,EAAKqV,QAAQpU,GACtB,OAAOoQ,EAAA5Q,EAAoB+Q,KAAK,SAA0BC,GACxD,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAEH,OADAF,EAASE,KAAO,EACT7R,OAAAsiB,EAAA,EAAAtiB,CAAIA,OAAAuiB,EAAA,EAAAviB,CAAoBmB,GAAKwhB,EAAoBC,EAAoBC,GAAmBL,EAAA,IAEjG,KAAK,EACL,IAAK,MACH,OAAO7Q,EAASS,SAGrBoB,EAAS7Q,MAGd,SAAS2H,IACP,OAAOiH,EAAA5Q,EAAoB+Q,KAAK,SAAe0E,GAC7C,OACE,OAAQA,EAAUxE,KAAOwE,EAAUvE,MACjC,KAAK,EAEH,OADAuE,EAAUvE,KAAO,EACV7R,OAAAsiB,EAAA,EAAAtiB,EAAKA,OAAAsiB,EAAA,EAAAtiB,CAAUyiB,EAAA,EAA2BC,KAEnD,KAAK,EACL,IAAK,MACH,OAAOtM,EAAUhE,SAGtBsB,EAAU/Q","file":"app.04c026a0.js","sourcesContent":["import React, { Component } from 'react';\nimport './ChromeTabs.css';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport ChromeTab from '../ChromeTab/ChromeTab';\nimport logo from '../../../../../iiif-redux-white.png';\n\nconst SortableChromeTabs = SortableContainer(\n  ({ items, current, onClick, onClose, eWidth, ...props }) => (\n    <div className=\"chrome-tab-container\" style={{ display: 'flex' }}>\n      {items.map(({ id, value }, index) => (\n        <ChromeTab\n          onClick={e => {\n            if (!e.target.classList.contains('chrome-tab-close')) {\n              onClick(id);\n            }\n          }}\n          onClose={e => {\n            e.preventDefault();\n            onClose(id);\n          }}\n          active={id === current}\n          leftOffset={(index + 1) * eWidth}\n          key={index}\n          index={index}\n          {...props}\n        >\n          {value}\n        </ChromeTab>\n      ))}\n    </div>\n  )\n);\n\nclass ChromeTabs extends Component {\n  tabContentEl = null;\n  options = {\n    tabOverlapDistance: 10,\n    minWidth: 40,\n    maxWidth: 180,\n  };\n\n  getTabEffectiveWidth(tabWidth) {\n    return tabWidth - this.options.tabOverlapDistance;\n  }\n\n  getTabWidth(tabs) {\n    if (!this.tabContentEl) {\n      return this.options.maxWidth;\n    }\n    const tabsContentWidth =\n      this.tabContentEl.clientWidth - this.options.tabOverlapDistance;\n    const width =\n      tabsContentWidth / tabs.length + this.options.tabOverlapDistance;\n\n    return Math.max(\n      this.options.minWidth,\n      Math.min(this.options.maxWidth, width)\n    );\n  }\n\n  componentDidMount() {\n    this.setState({\n      mounted: true,\n    });\n  }\n\n  render() {\n    const { tabs, onSortEnd, onClick, onClose, current } = this.props;\n    const width = this.getTabWidth(tabs);\n    const eWidth = this.getTabEffectiveWidth(width);\n\n    return (\n      <div\n        ref={ref => {\n          this.tabContentEl = ref;\n        }}\n        className=\"chrome-tabs chrome-tabs-dark-theme\"\n      >\n        <div className=\"chrome-tabs-logo\">\n          <img src={logo} height=\"100%\" width=\"auto\" />\n        </div>\n        <SortableChromeTabs\n          helperClass=\"chrome-tabs-dragging\"\n          axis=\"x\"\n          lockAxis=\"x\"\n          items={tabs}\n          width={width}\n          eWidth={eWidth}\n          onSortEnd={onSortEnd}\n          distance={5}\n          onClose={onClose}\n          onClick={onClick}\n          current={current}\n        />\n        <div className=\"chrome-tabs-bottom-bar\" style={{ zIndex: 3 }} />\n      </div>\n    );\n  }\n}\n\nexport default ChromeTabs;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ChromeTabs/ChromeTabs.js","/**\n * Presentation 2 - schema definition\n * ============================================================================\n *\n * - Collection\n * - Manifest\n * - Sequence\n * - Canvas\n * - Annotation\n * - AnnotationList\n * - Range\n * - Layer\n * - Image Content (Annotation)\n * - Other Content (Annotation List)\n *\n * - External resources\n * - Services\n */\n\n// @todo Image Service API.\nimport { compose } from 'redux';\nimport { schema, normalize } from 'normalizr';\nimport moveStartCanvasToSequence from '../compat/moveStartCanvasToSequence';\nimport preprocessLinkedEntities from '../compat/preprocessLinkedEntities';\nimport addMissingIds from '../compat/addMissingIds';\n\nfunction createEntity(name) {\n  var options = {\n    idAttribute: '@id'\n  };\n\n  return new schema.Entity(name, {}, options);\n}\n\nvar collection = createEntity('collections');\nvar manifest = createEntity('manifests');\nvar sequence = createEntity('sequences');\nvar canvas = createEntity('canvases');\nvar annotation = createEntity('annotations');\nvar annotationList = createEntity('annotationLists');\nvar range = createEntity('ranges');\nvar layer = createEntity('layers');\nvar imageResource = createEntity('imageResources'); // thumbnails + image service\nvar choice = createEntity('choices');\n\n// Unofficial types?\nvar externalResource = createEntity('externalResources');\nvar service = createEntity('services', true);\nvar within = new schema.Array({\n  collection: collection,\n  manifest: manifest,\n  externalResource: externalResource,\n  layer: layer\n}, function (entity) {\n  switch (entity['@type']) {\n    case 'sc:Collection':\n      return 'collection';\n    case 'sc:Manifest':\n      return 'manifest';\n    case 'sc:Layer':\n      return 'layer';\n    default:\n      return 'externalResource';\n  }\n});\n\nvar rangeMember = new schema.Union({\n  canvas: canvas,\n  range: range\n}, function (input) {\n  return input['@type'] === 'sc:Canvas' ? 'canvas' : 'range';\n});\n\n/**\n * Dereferencable resources:\n *\n * - Collection (Required)\n * - Manifest (Required)\n * - First Sequence (Optional)\n * - Nth Sequence (Required)\n * - Canvas (Optional)\n * - Annotation (Recommended)\n * - AnnotationList (Required)\n * - Range (Optional)\n * - Layer (Optional)\n * - Image Content (Required)\n * - Other Content (Required)\n */\nvar RESOURCE_TYPE_MAP = {\n  'sc:Collection': 'collection',\n  'sc:Sequence': 'sequence',\n  'sc:Manifest': 'manifest',\n  'sc:Canvas': 'canvas',\n  'sc:AnnotationList': 'annotationList',\n  'sc:Annotation': 'annotation',\n  'sc:Range': 'range',\n  'sc:Layer': 'layer',\n  'dctypes:Image': 'imageResource'\n};\nvar resource = new schema.Union({\n  collection: collection,\n  sequence: sequence,\n  manifest: manifest,\n  canvas: canvas,\n  annotationList: annotationList,\n  annotation: annotation,\n  range: range,\n  layer: layer,\n  imageResource: imageResource,\n  service: service\n}, function (entity) {\n  if (RESOURCE_TYPE_MAP[entity['@type']]) {\n    return RESOURCE_TYPE_MAP[entity['@type']];\n  }\n  if (entity.profile) {\n    return 'service';\n  }\n  throw Error('Unknown entity type');\n});\n\n// ===========================================================================\n// 1) Collections\n// ===========================================================================\ncollection.define({\n  collections: new schema.Array({\n    collection: collection,\n    manifest: manifest\n  }, function (entity) {\n    return entity['@type'] === 'sc:Manifest' ? 'manifest' : 'collection';\n  }),\n  manifests: [manifest],\n  members: new schema.Array({\n    collection: collection,\n    manifest: manifest\n  }, function (entity) {\n    return entity['@type'] === 'sc:Manifest' ? 'manifest' : 'collection';\n  }),\n\n  // Linking\n  seeAlso: [externalResource],\n  service: [service],\n  related: [externalResource],\n  rendering: [externalResource],\n  otherContent: [annotationList],\n  within: within,\n\n  // Extra\n  thumbnail: imageResource\n});\n\n// ===========================================================================\n// 2) Manifests\n// ===========================================================================\nmanifest.define({\n  sequences: [sequence],\n  structures: [range],\n\n  // Linking\n  seeAlso: [externalResource],\n  service: [service],\n  related: [externalResource],\n  rendering: [externalResource],\n  otherContent: [annotationList],\n  within: within,\n\n  // Extra\n  thumbnail: imageResource\n});\n\n// ===========================================================================\n// 3) Sequences\n// ===========================================================================\nsequence.define({\n  canvases: [canvas],\n\n  // Linking\n  seeAlso: [externalResource],\n  service: [service],\n  related: [externalResource],\n  rendering: [externalResource],\n  otherContent: [annotationList],\n  within: within,\n  startCanvas: canvas,\n\n  // Extra\n  thumbnail: imageResource\n});\n\n// ===========================================================================\n// 4) Canvases\n// ===========================================================================\ncanvas.define({\n  images: [annotation],\n\n  // Linking\n  seeAlso: [externalResource],\n  service: [service],\n  related: [externalResource],\n  rendering: [externalResource],\n  otherContent: [annotationList],\n  within: within,\n\n  // Extra\n  thumbnail: imageResource\n});\n\n// ===========================================================================\n// 5) Annotation\n// ===========================================================================\nannotation.define({\n  resource: new schema.Union({\n    imageResource: imageResource,\n    externalResource: externalResource,\n    choice: choice\n  }, function (input) {\n    switch (input['@type']) {\n      case 'dctypes:Image':\n        return 'imageResource';\n      case 'oa:Choice':\n        return 'choice';\n      default:\n        return 'externalResource';\n    }\n  }),\n  on: canvas,\n\n  // Linking\n  seeAlso: [externalResource],\n  service: [service],\n  related: [externalResource],\n  rendering: [externalResource],\n  within: within,\n\n  // Extra\n  thumbnail: imageResource\n});\n\n// ===========================================================================\n// 6) Annotation List\n// ===========================================================================\nannotationList.define({\n  resources: [annotation],\n\n  // Linking\n  seeAlso: [externalResource],\n  service: [service],\n  related: [externalResource],\n  rendering: [externalResource],\n  within: within,\n\n  // Extra\n  thumbnail: imageResource\n});\n\n// ===========================================================================\n// 7) Range\n// ===========================================================================\nrange.define({\n  resources: [annotation],\n  members: [rangeMember],\n  canvases: [canvas],\n  ranges: [range],\n\n  // Linking\n  seeAlso: [externalResource],\n  service: [service],\n  related: [externalResource],\n  rendering: [externalResource],\n  within: within,\n  startCanvas: canvas,\n  contentLayer: layer,\n\n  // Extra\n  thumbnail: imageResource\n});\n\n// ===========================================================================\n// 8) Layer\n// ===========================================================================\nlayer.define({\n  // Linking\n  seeAlso: [externalResource],\n  service: [service],\n  related: [externalResource],\n  rendering: [externalResource],\n  within: within\n});\n\n// ===========================================================================\n// 9) Image resource\n// ===========================================================================\nimageResource.define({\n  service: [service]\n});\n\n// ===========================================================================\n// 10) Choice\n// ===========================================================================\nchoice.define({\n  default: annotation,\n  item: [annotation]\n});\n\nvar preprocess = compose(moveStartCanvasToSequence, preprocessLinkedEntities, addMissingIds);\n\nvar normalizeResource = function normalizeResource(rawResource) {\n  var customSchema = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : resource;\n  return normalize(preprocess(rawResource), customSchema);\n};\n\nexport { normalizeResource as normalize, preprocess, resource, collection, manifest, sequence, canvas, annotation, annotationList, range, layer, imageResource, externalResource, within, service };\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/schema/presentation2.js","module.exports = __webpack_public_path__ + \"iiif-redux-white.58ac54fe.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/stephen.fraser/github.com/stephenwf/iiif-redux/iiif-redux-white.png\n// module id = 8c4l\n// module chunks = 1","import memoize from 'lodash.memoize';\nimport normalizeLanguageProperty from './normalizeLanguageProperty';\n\nvar normalizeMetadataProperty = memoize(function (metadata, defaultLanguage) {\n  return Array.isArray(metadata) ? metadata.map(function (metadataItem) {\n    return metadataItem.value ? {\n      label: normalizeLanguageProperty(metadataItem.label, defaultLanguage),\n      value: normalizeLanguageProperty(metadataItem.value, defaultLanguage)\n    } : null;\n  }).filter(function (e) {\n    return e;\n  }) : [];\n});\n\nexport default normalizeMetadataProperty;\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/compat/normalizeMetadataProperty.js","import memoize from 'lodash.memoize';\nimport filterHtmlTags from './filterHtmlTags';\nimport normalizeSingleLanguageProperty from './normalizeSingleLanguageProperty';\n\nvar normalizeLanguageProperty = memoize(function (property, defaultLanguage) {\n  if (!property) {\n    return [];\n  }\n  if (typeof property === 'string') {\n    return [{ '@language': defaultLanguage, '@value': filterHtmlTags(property) }];\n  }\n  if (Array.isArray(property)) {\n    return property.map(function (prop) {\n      return normalizeSingleLanguageProperty(prop, defaultLanguage);\n    }).reduce(function (a, b) {\n      return a.concat(b);\n    }, []).filter(function (e) {\n      return e;\n    });\n  }\n  return normalizeSingleLanguageProperty(property, defaultLanguage);\n});\n\nexport default normalizeLanguageProperty;\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/compat/normalizeLanguageProperty.js","import { createStore, applyMiddleware, combineReducers, compose } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport * as reducers from './reducers';\nimport sagas from './sagas';\n\nvar composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport default function createCustomStore() {\n  var customReducers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var extraMiddleware = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var customSagas = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var defaultState = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  var sagaMiddleware = createSagaMiddleware();\n\n  var store = createStore(combineReducers(reducers), defaultState, composeEnhancers(applyMiddleware.apply(undefined, [sagaMiddleware].concat(extraMiddleware))));\n\n  sagas.map(function (saga) {\n    return sagaMiddleware.run(saga);\n  });\n  // customSagas.map(saga => sagaMiddleware.run(saga));\n\n  return store;\n}\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/createStore.js","import {\n  frameConfigureExtension,\n  frameCreate,\n  frameDelete,\n  frameEnableExtension,\n  frameFocus,\n  frameGoToResource,\n  frameSetInitialResource,\n} from '../../../iiif-redux/src/spaces/frames';\nimport { arrayMove } from 'react-sortable-hoc';\n\nfunction createNewTab(dispatch) {\n  return (id, label, index) => {\n    dispatch(frameCreate({}, id));\n    dispatch(\n      frameEnableExtension(\n        'tabState',\n        {\n          tabIndex: index,\n          tabLabel: label,\n        },\n        id\n      )\n    );\n  };\n}\n\nfunction selectTab(dispatch) {\n  return id => {\n    dispatch(frameFocus(id));\n  };\n}\n\nfunction closeTab(dispatch) {\n  return id => {\n    dispatch(frameDelete(id));\n  };\n}\n\nfunction updateSortOrder(dispatch) {\n  return (allFrames, oldIndex, newIndex) => {\n    const tabs = sortTabs(allFrames);\n    const newOrder = arrayMove(tabs, oldIndex, newIndex);\n\n    newOrder.forEach((tab, index) => {\n      dispatch(\n        frameConfigureExtension('tabState', { tabIndex: index }, tab.id)\n      );\n    });\n  };\n}\n\nexport function setResource(dispatch) {\n  return (frameId, resourceId, resourceType) => {\n    dispatch(frameSetInitialResource({ resourceId, resourceType }, frameId));\n  };\n}\n\nexport function sortTabs(allFrames) {\n  return allFrames\n    .map(frame => ({\n      id: frame.id,\n      value: frame.tabState.tabLabel,\n      order: frame.tabState.tabIndex,\n    }))\n    .sort((a, b) => {\n      if (a.order > b.order) {\n        return 1;\n      }\n      if (a.order < b.order) {\n        return -1;\n      }\n      return 0;\n    });\n}\n\nexport function tabActions(dispatch) {\n  return {\n    createNewTab: createNewTab(dispatch),\n    selectTab: selectTab(dispatch),\n    closeTab: closeTab(dispatch),\n    updateSortOrder: updateSortOrder(dispatch),\n    setResource: setResource(dispatch),\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/spaces/tabs.js","import React, { Component } from 'react';\nimport './ChromeIcon.css';\nimport { Icon } from 'antd';\n\nclass ChromeIcon extends Component {\n  render() {\n    const { type, iconProps, ...props } = this.props;\n    return (\n      <div className=\"chrome-icon\" {...props}>\n        <Icon type={type} {...iconProps} />\n      </div>\n    );\n  }\n}\n\nexport default ChromeIcon;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ChromeIcon/ChromeIcon.js","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector, createSelector } from 'reselect';\nimport { frames, getAllFrameIds } from 'iiif-redux/es/api/frame';\nimport { getFocusedFrameId } from 'iiif-redux/es/api/frame';\nimport ChromeTabs from '../ChromeTabs/ChromeTabs';\nimport ChromeIcon from '../ChromeIcon/ChromeIcon';\nimport ChromeNavigation from '../ChromeNavigation/ChromeNavigation';\nimport { sortTabs, tabActions } from '../../spaces/tabs';\nimport './App.css';\nimport { focusedFrame } from 'iiif-redux/es/api/frame';\n\nclass App extends Component {\n  state = {\n    tabs: [{ id: 0, value: 'testing - 1' }, { id: 1, value: 'testing - 2' }],\n    current: 0,\n  };\n\n  componentWillMount() {\n    this.props.createNewTab('new-tab-0', 'new tab', 0);\n  }\n\n  componentWillReceiveProps(newProps) {\n    if (newProps.focused === null && newProps.allFrameIds.length) {\n      this.props.selectTab(newProps.allFrameIds[0]);\n    }\n  }\n\n  onSortEnd = ({ oldIndex, newIndex }) => {\n    this.props.updateSortOrder(this.props.allFrames, oldIndex, newIndex);\n  };\n\n  addNewTab = () => {\n    const num = Math.round(Math.random() * 100000);\n    const id = `new-tab-${num}`;\n    this.props.createNewTab(id, 'new tab', this.props.allFrames.length);\n  };\n\n  onClickTab = id => {\n    this.props.selectTab(id);\n  };\n\n  onClose = id => {\n    this.props.closeTab(id);\n  };\n\n  handleSearch = text => {\n    this.props.setResource(this.props.focused, text, 'collection');\n  };\n\n  render() {\n    const { focused, allFrames } = this.props;\n    const tabs = sortTabs(allFrames);\n\n    return (\n      <div>\n        <ChromeTabs\n          tabs={tabs}\n          current={focused}\n          onClick={this.onClickTab}\n          onSortEnd={this.onSortEnd}\n          onClose={this.onClose}\n        />\n        <ChromeNavigation\n          searchValue={\n            this.props.currentResource\n              ? this.props.currentResource.id || ''\n              : ''\n          }\n          onSearch={this.handleSearch}\n          left={() => [\n            <ChromeIcon key=\"left\" type=\"left\" />,\n            <ChromeIcon key=\"right\" type=\"right\" />,\n            <ChromeIcon key=\"reload\" type=\"reload\" />,\n            <ChromeIcon key=\"plus\" type=\"plus\" onClick={this.addNewTab} />,\n          ]}\n          right={() => <ChromeIcon type=\"star\" />}\n        />\n\n        {this.props.currentResource && this.props.currentResource.id ? (\n          <div\n            style={{\n              color: '#fff',\n              marginTop: 100,\n              marginLeft: 'auto',\n              marginRight: 'auto',\n              width: '50%',\n            }}\n          >\n            Current resource:\n            <h1 style={{ color: '#fff' }}>{this.props.currentResource.id}</h1>\n            <p>\n              Type: <strong>{this.props.currentResource.type}</strong>\n            </p>\n          </div>\n        ) : (\n          <div\n            style={{\n              color: '#fff',\n              marginTop: 100,\n              marginLeft: 'auto',\n              marginRight: 'auto',\n              width: '50%',\n            }}\n          >\n            <h1 style={{ color: '#999' }}>\n              Enter a collection URL and hit enter...\n            </h1>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  createStructuredSelector({\n    currentResource: focusedFrame(api => ({\n      id: api.getCurrentResourceId,\n      type: api.getCurrentResourceType,\n    })),\n    focused: getFocusedFrameId,\n    allFrameIds: getAllFrameIds,\n    allFrames: frames(getAllFrameIds, singleFrame => ({\n      id: singleFrame.getId,\n      enabled: singleFrame.getEnabledExtensions,\n      tabState: createSelector(\n        singleFrame.getExtensionById('tabState'),\n        tabState => tabState.config\n      ),\n    })),\n  }),\n  tabActions\n)(App);\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/App/App.js","import React, { Component } from 'react';\nimport './ChromeNavigation.css';\n\nclass ChromeNavigation extends Component {\n  state = { textValue: '' };\n\n  handleKeyUp = e => {\n    if (e.keyCode === 13) {\n      // Enter key\n      this.props.onSearch(this.textInput.value);\n    }\n  };\n\n  handleChange = e => {\n    this.setState({ searchValue: e.target.value });\n  };\n\n  componentWillReceiveProps(newProps) {\n    if (this.props.searchValue !== newProps.searchValue) {\n      this.setState({ searchValue: newProps.searchValue });\n    }\n  }\n\n  render() {\n    const { left, right, ...props } = this.props;\n    return (\n      <div className=\"chrome-navigation\">\n        {left ? left(props) : null}\n        <input\n          value={this.state.searchValue}\n          ref={ref => (this.textInput = ref)}\n          type=\"text\"\n          className=\"chrome-navigation__input\"\n          placeholder=\"Search or enter collection or manifest URL\"\n          onChange={this.handleChange}\n          onKeyUp={this.handleKeyUp}\n        />\n        {right ? right(props) : null}\n      </div>\n    );\n  }\n}\n\nexport default ChromeNavigation;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ChromeNavigation/ChromeNavigation.js","import normalizeLinkedResourceToObject from './normalizeLinkedResourceToObject';\nimport memoize from 'lodash.memoize';\nimport validUrl from 'valid-url';\n\nvar normalizeLinkedResources = memoize(function (property) {\n  if (!property) {\n    return [];\n  }\n  if (typeof property === 'string') {\n    if (!validUrl.isWebUri(property)) {\n      return null;\n    }\n    return [{ '@id': property }];\n  }\n  if (Array.isArray(property)) {\n    return property.map(function (prop) {\n      return normalizeLinkedResourceToObject(prop);\n    }).reduce(function (a, b) {\n      return a.concat(b);\n    }, []).filter(function (e) {\n      return e;\n    });\n  }\n  return normalizeLinkedResourceToObject(property);\n});\n\nexport default normalizeLinkedResources;\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/compat/normalizeLinkedResources.js","import React, { Component } from 'react';\nimport './ChromeTab.scss';\nimport { SortableElement } from 'react-sortable-hoc';\n\nclass ChromeTab extends Component {\n  render() {\n    return (\n      <div\n        onClick={this.props.onClick}\n        className={`${\n          this.props.active ? 'chrome-tab-current' : ''\n        } chrome-tab`}\n        style={{\n          width: this.props.width,\n        }}\n      >\n        <div className=\"chrome-tab-background\">\n          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n            <defs>\n              <symbol id=\"chrome-tab-geometry-left\" viewBox=\"0 0 214 29\">\n                <path d=\"M14.3 0.1L214 0.1 214 29 0 29C0 29 12.2 2.6 13.2 1.1 14.3-0.4 14.3 0.1 14.3 0.1Z\" />\n              </symbol>\n              <symbol id=\"chrome-tab-geometry-right\" viewBox=\"0 0 214 29\">\n                <use href=\"#chrome-tab-geometry-left\" />\n              </symbol>\n              <clipPath id=\"crop\">\n                <rect className=\"mask\" width=\"100%\" height=\"100%\" x=\"0\" />\n              </clipPath>\n            </defs>\n            <svg width=\"50%\" height=\"100%\">\n              <use\n                href=\"#chrome-tab-geometry-left\"\n                width=\"214\"\n                height=\"29\"\n                className=\"chrome-tab-background\"\n              />\n              <use\n                href=\"#chrome-tab-geometry-left\"\n                width=\"214\"\n                height=\"29\"\n                className=\"chrome-tab-shadow\"\n              />\n            </svg>\n            <g transform=\"scale(-1, 1)\">\n              <svg width=\"50%\" height=\"100%\" x=\"-100%\" y=\"0\">\n                <use\n                  href=\"#chrome-tab-geometry-right\"\n                  width=\"214\"\n                  height=\"29\"\n                  className=\"chrome-tab-background\"\n                />\n                <use\n                  href=\"#chrome-tab-geometry-right\"\n                  width=\"214\"\n                  height=\"29\"\n                  className=\"chrome-tab-shadow\"\n                />\n              </svg>\n            </g>\n          </svg>\n        </div>\n        <div className=\"chrome-tab-favicon\" />\n        <div className=\"chrome-tab-title\">{this.props.children}</div>\n        <div className=\"chrome-tab-close\" onClick={this.props.onClose} />\n      </div>\n    );\n  }\n}\n\nexport default SortableElement(props => <ChromeTab {...props} />);\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ChromeTab/ChromeTab.js","import { createSelector, createStructuredSelector } from 'reselect';\nimport memoize from 'lodash.memoize';\n\nexport default function resourceListSelectorFactory(getAllOfResource, rootApi) {\n  return memoize(function (selector, api) {\n    return createSelector(selector, getAllOfResource, function (s) {\n      return s;\n    }, function (list, allResources, state) {\n      return list.map(function (idOrResource) {\n        var selectorOrStructured = api(rootApi(function () {\n          return typeof idOrResource === 'string' ? allResources[idOrResource] : idOrResource;\n        }));\n\n        if (typeof selectorOrStructured === 'function') {\n          return selectorOrStructured(state);\n        }\n\n        return createStructuredSelector(selectorOrStructured)(state);\n      });\n    });\n  });\n}\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/utility/resourceListSelectorFactory.js","import _regeneratorRuntime from 'babel-runtime/regenerator';\n\nvar _createActions2, _handleActions, _handleActions2;\n\nvar requestResource = function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resourceId, options) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(process.env.NODE_ENV === 'production')) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt('return', cachedFetch(resourceId));\n\n          case 2:\n            return _context.abrupt('return', fetch(resourceId).then(function (resp) {\n              return resp.json();\n            }));\n\n          case 3:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function requestResource(_x3, _x4) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(errorAction),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(successAction),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(requestIiifResource),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(requestUnknownResource),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(saga);\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nimport cachedFetch from 'fetch-unless-cached';\nimport { createActions, handleActions } from 'redux-actions';\nimport validUrl from 'valid-url';\nimport { normalize } from '../schema/presentation2';\nimport { call, put, select, takeEvery, all } from 'redux-saga/effects';\nimport deepmerge from 'deepmerge';\nimport update from 'immutability-helper';\nvar debug = require('debug')('iiif-redux');\n\nvar IIIF_RESOURCE_REQUEST = 'IIIF_RESOURCE_REQUEST';\nvar IIIF_RESOURCE_SUCCESS = 'IIIF_RESOURCE_SUCCESS';\nvar IIIF_RESOURCE_ERROR = 'IIIF_RESOURCE_ERROR';\nvar IIIF_RESOURCE_REQUEST_UNKNOWN = 'IIIF_RESOURCE_REQUEST_UNKNOWN';\nvar IIIF_RESOURCE_IDENTIFY = 'IIIF_RESOURCE_IDENTIFY';\n\nvar _createActions = createActions((_createActions2 = {}, _createActions2[IIIF_RESOURCE_REQUEST_UNKNOWN] = function (resourceId) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return {\n    resourceId: resourceId,\n    dereferenceIfMissing: options.dereferenceIfMissing || false,\n    ttl: options.ttl || 600,\n    forceFresh: options.forceFresh\n  };\n}, _createActions2[IIIF_RESOURCE_REQUEST] = function (resourceId, types, schema) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  return {\n    resourceId: resourceId,\n    types: types,\n    schema: schema,\n    dereferenceIfMissing: options.dereferenceIfMissing || false,\n    ttl: options.ttl || 600,\n    forceFresh: options.forceFresh\n  };\n}, _createActions2[IIIF_RESOURCE_SUCCESS] = function (resourceId, normalizedResponse) {\n  return {\n    resourceId: resourceId,\n    normalizedResponse: normalizedResponse\n  };\n}, _createActions2[IIIF_RESOURCE_ERROR] = function (resourceId, error) {\n  return {\n    resourceId: resourceId,\n    error: error\n  };\n}, _createActions2)),\n    iiifResourceRequestUnknown = _createActions.iiifResourceRequestUnknown,\n    iiifResourceRequest = _createActions.iiifResourceRequest,\n    iiifResourceSuccess = _createActions.iiifResourceSuccess,\n    iiifResourceError = _createActions.iiifResourceError;\n\nvar DEFAULT_STATE = {\n  dereferenced: {},\n  resources: {\n    collections: {},\n    sequences: {},\n    manifests: {},\n    canvases: {},\n    annotationLists: {},\n    annotations: {},\n    ranges: {},\n    layers: {},\n    imageResources: {},\n    externalResources: {}\n  }\n};\n\nvar resourceReducer = handleActions((_handleActions = {}, _handleActions[iiifResourceSuccess] = function (state, _ref) {\n  var normalizedResponse = _ref.payload.normalizedResponse;\n  return deepmerge(state, normalizedResponse);\n}, _handleActions), DEFAULT_STATE.resources);\n\nvar dereferencedReducer = handleActions((_handleActions2 = {}, _handleActions2[iiifResourceRequest] = function (state, _ref2) {\n  var _update;\n\n  var _ref2$payload = _ref2.payload,\n      resourceId = _ref2$payload.resourceId,\n      ttl = _ref2$payload.ttl;\n  return update(state, (_update = {}, _update[resourceId] = {\n    $set: {\n      resourceId: resourceId,\n      ttl: ttl,\n      requested: state[resourceId] ? state[resourceId].requested : new Date(),\n      loading: state[resourceId] ? state[resourceId].loading : true\n    }\n  }, _update));\n}, _handleActions2[iiifResourceError] = function (state, _ref3) {\n  var _update2;\n\n  var _ref3$payload = _ref3.payload,\n      resourceId = _ref3$payload.resourceId,\n      error = _ref3$payload.error;\n  return update(state, (_update2 = {}, _update2[resourceId] = {\n    loading: { $set: false },\n    error: { $set: error }\n  }, _update2));\n}, _handleActions2[iiifResourceSuccess] = function (state, _ref4) {\n  var _update3;\n\n  var resourceId = _ref4.payload.resourceId;\n  return update(state, (_update3 = {}, _update3[resourceId] = {\n    loading: { $set: false }\n  }, _update3));\n}, _handleActions2), DEFAULT_STATE.dereferenced);\n\nfunction errorAction(type, resourceId, error) {\n  return _regeneratorRuntime.wrap(function errorAction$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return put(iiifResourceError(resourceId, error));\n\n        case 2:\n          if (!type) {\n            _context2.next = 5;\n            break;\n          }\n\n          _context2.next = 5;\n          return put({ type: type, payload: { resourceId: resourceId, error: error } });\n\n        case 5:\n        case 'end':\n          return _context2.stop();\n      }\n    }\n  }, _marked, this);\n}\n\nfunction successAction(type, resourceId, normalizedResponse) {\n  return _regeneratorRuntime.wrap(function successAction$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return put(iiifResourceSuccess(resourceId, normalizedResponse));\n\n        case 2:\n          _context3.next = 4;\n          return put({ type: type, payload: { resourceId: resourceId, normalizedResponse: normalizedResponse } });\n\n        case 4:\n        case 'end':\n          return _context3.stop();\n      }\n    }\n  }, _marked2, this);\n}\n\nfunction requestIiifResource(_ref6) {\n  var payload = _ref6.payload;\n\n  var resourceId, types, schema, options, REQUEST, SUCCESS, ERROR, state, response, _normalize, result, entities;\n\n  return _regeneratorRuntime.wrap(function requestIiifResource$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          resourceId = payload.resourceId, types = payload.types, schema = payload.schema, options = _objectWithoutProperties(payload, ['resourceId', 'types', 'schema']);\n\n          if (!(types.length !== 3 && process.env.NODE_ENV !== 'production')) {\n            _context4.next = 4;\n            break;\n          }\n\n          _context4.next = 4;\n          return call(errorAction, null, resourceId, 'DEV ERROR: You must pass in exactly 3 action types');\n\n        case 4:\n          REQUEST = types[0], SUCCESS = types[1], ERROR = types[2];\n\n          if (validUrl.isWebUri(resourceId)) {\n            _context4.next = 9;\n            break;\n          }\n\n          _context4.next = 8;\n          return call(errorAction, ERROR, resourceId, 'Resource is not a valid Web URI.');\n\n        case 8:\n          return _context4.abrupt('return');\n\n        case 9:\n          _context4.next = 11;\n          return select();\n\n        case 11:\n          state = _context4.sent;\n\n          if (!(state.dereferenced[resourceId] && state.dereferenced[resourceId].loading === false /*&& options.forceFresh === false*/\n          )) {\n            _context4.next = 15;\n            break;\n          }\n\n          debug('Skipping fetch for resource %s using cache.', resourceId);\n\n          return _context4.abrupt('return');\n\n        case 15:\n          _context4.next = 17;\n          return put({ type: REQUEST, payload: payload });\n\n        case 17:\n          _context4.prev = 17;\n\n          debug('Fetching resource %s', resourceId);\n          _context4.next = 21;\n          return call(requestResource, resourceId, options);\n\n        case 21:\n          response = _context4.sent;\n\n\n          if (response['@id'] !== resourceId) {\n            // @todo this will not catch \"partOf\" fields.\n            debug('Resource ID does not match requested resource, patching... Found: %s Expected: %s', response['@id'], resourceId);\n            response['@id'] = resourceId;\n          }\n\n          debug('Starting normalize resource %s', resourceId);\n\n          _normalize = normalize(response, schema), result = _normalize.result, entities = _normalize.entities;\n\n\n          debug('Finished normalize resource %s', result);\n\n          _context4.next = 28;\n          return call(successAction, SUCCESS, result, entities);\n\n        case 28:\n          _context4.next = 35;\n          break;\n\n        case 30:\n          _context4.prev = 30;\n          _context4.t0 = _context4['catch'](17);\n\n          debug('Error: %O', _context4.t0);\n          _context4.next = 35;\n          return call(errorAction, ERROR, resourceId, _context4.t0);\n\n        case 35:\n        case 'end':\n          return _context4.stop();\n      }\n    }\n  }, _marked3, this, [[17, 30]]);\n}\n\nfunction requestUnknownResource(_ref7) {\n  var _ref7$payload = _ref7.payload,\n      resourceId = _ref7$payload.resourceId,\n      options = _objectWithoutProperties(_ref7$payload, ['resourceId']);\n\n  return _regeneratorRuntime.wrap(function requestUnknownResource$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n        case 'end':\n          return _context5.stop();\n      }\n    }\n  }, _marked4, this);\n}\n\nfunction saga() {\n  return _regeneratorRuntime.wrap(function saga$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return all([takeEvery(IIIF_RESOURCE_REQUEST, requestIiifResource), takeEvery(IIIF_RESOURCE_REQUEST_UNKNOWN, requestUnknownResource)]);\n\n        case 2:\n        case 'end':\n          return _context6.stop();\n      }\n    }\n  }, _marked5, this);\n}\n\nexport { saga, resourceReducer, dereferencedReducer, iiifResourceRequest, iiifResourceRequestUnknown, DEFAULT_STATE };\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/spaces/iiif-resource.js","// Frames API.\nimport { createActions, handleActions } from 'redux-actions';\nimport update from 'immutability-helper';\n\nconst FRAME_CREATE = 'FRAME_CREATE';\nconst FRAME_DELETE = 'FRAME_DELETE';\nconst FRAME_SET_INITIAL_RESOURCE = 'FRAME_SET_INITIAL_RESOURCE';\nconst FRAME_GO_TO_RESOURCE = 'FRAME_GO_TO_RESOURCE';\nconst FRAME_GO_BACK = 'FRAME_GO_BACK';\nconst FRAME_GO_BACK_TO_TYPE = 'FRAME_GO_BACK_TO_TYPE';\nconst FRAME_GO_FORWARD = 'FRAME_GO_FORWARD';\nconst FRAME_ENABLE_EXTENSION = 'FRAME_ENABLE_EXTENSION';\nconst FRAME_CONFIGURE_EXTENSION = 'FRAME_CONFIGURE_EXTENSION';\nconst FRAME_DISABLE_EXTENSION = 'FRAME_DISABLE_EXTENSION';\nconst FRAME_NEXT_CANVAS = 'FRAME_NEXT_CANVAS';\nconst FRAME_PREVIOUS_CANVAS = 'FRAME_PREVIOUS_CANVAS';\nconst FRAME_FOCUS = 'FRAME_FOCUS';\n\nconst DEFAULT_STATE = {\n  list: {},\n  focusedFrame: null,\n};\n\nconst DEFAULT_FRAME_ID = 'default-frame';\n\nconst requireProps = requiredProps => retValue => {\n  /* istanbul ignore next line */\n  if (process.env.NODE_ENV === 'production') return retValue;\n\n  requiredProps.forEach(prop => {\n    if (!retValue[prop]) {\n      throw new Error(`Dev error: missing required prop ${prop}`);\n    }\n  });\n\n  return retValue;\n};\n\nconst {\n  frameCreate,\n  frameDelete,\n  frameSetInitialResource,\n  frameGoToResource,\n  frameGoBack,\n  frameGoBackToType,\n  frameGoForward,\n  frameEnableExtension,\n  frameConfigureExtension,\n  frameDisableExtension,\n  frameNextCanvas,\n  framePreviousCanvas,\n  frameFocus,\n} = createActions({\n  [FRAME_CREATE]: (\n    { resourceType, resourceId, ...config } = {},\n    frameId = DEFAULT_FRAME_ID\n  ) =>\n    requireProps(['frameId'])({\n      frameId,\n      resourceType,\n      resourceId,\n      config,\n    }),\n\n  [FRAME_DELETE]: frameId =>\n    requireProps(['frameId'])({\n      frameId,\n    }),\n\n  [FRAME_SET_INITIAL_RESOURCE]: (\n    { resourceType, resourceId } = {},\n    frameId = DEFAULT_FRAME_ID\n  ) =>\n    requireProps(['resourceType', 'frameId', 'resourceId'])({\n      frameId,\n      resourceType,\n      resourceId,\n    }),\n\n  [FRAME_GO_TO_RESOURCE]: (\n    { resourceType, resourceId, smartJump = true } = {},\n    frameId = DEFAULT_FRAME_ID\n  ) =>\n    requireProps(['resourceType', 'resourceId', 'frameId'])({\n      frameId,\n      resourceType,\n      resourceId,\n      smartJump,\n    }),\n\n  [FRAME_GO_BACK]: (frameId = DEFAULT_FRAME_ID) =>\n    requireProps(['frameId'])({ frameId }),\n\n  [FRAME_GO_BACK_TO_TYPE]: (resourceType, frameId = DEFAULT_FRAME_ID) =>\n    requireProps(['frameId', 'resourceType'])({\n      frameId,\n      resourceType,\n    }),\n\n  [FRAME_GO_FORWARD]: (frameId = DEFAULT_FRAME_ID) =>\n    requireProps(['frameId'])({ frameId }),\n\n  [FRAME_ENABLE_EXTENSION]: (\n    extensionId,\n    extensionConfig,\n    frameId = DEFAULT_FRAME_ID\n  ) =>\n    requireProps(['extensionId', 'frameId'])({\n      extensionId,\n      extensionConfig,\n      frameId,\n    }),\n\n  [FRAME_CONFIGURE_EXTENSION]: (\n    extensionId,\n    extensionConfig,\n    frameId = DEFAULT_FRAME_ID\n  ) =>\n    requireProps(['extensionId', 'frameId'])({\n      extensionId,\n      extensionConfig,\n      frameId,\n    }),\n\n  [FRAME_DISABLE_EXTENSION]: (extensionId, frameId = DEFAULT_FRAME_ID) =>\n    requireProps(['extensionId', 'frameId'])({\n      extensionId,\n      frameId,\n    }),\n\n  [FRAME_NEXT_CANVAS]: (frameId = DEFAULT_FRAME_ID) =>\n    requireProps(['frameId'])({\n      frameId,\n    }),\n\n  [FRAME_PREVIOUS_CANVAS]: (frameId = DEFAULT_FRAME_ID) =>\n    requireProps(['frameId'])({\n      frameId,\n    }),\n\n  [FRAME_FOCUS]: (frameId = DEFAULT_FRAME_ID) =>\n    requireProps(['frameId'])({\n      frameId,\n    }),\n});\n\nconst reducer = handleActions(\n  {\n    [frameCreate]: (\n      state,\n      { payload: { frameId, resourceType, resourceId, config } }\n    ) =>\n      update(state, {\n        focusedFrame: { $set: frameId },\n        list: {\n          [frameId]: {\n            $set: {\n              id: frameId,\n              current: 0,\n              path:\n                resourceId && resourceType\n                  ? [{ id: resourceId, schema: resourceType }]\n                  : [],\n              enabledExtensions: [],\n              extensions: {},\n              config,\n            },\n          },\n        },\n      }),\n\n    [frameDelete]: (state, { payload: { frameId } }) =>\n      update(state, {\n        focusedFrame: {\n          $apply: focusedFrame =>\n            focusedFrame === frameId ? null : focusedFrame,\n        },\n        list: {\n          $apply: list => {\n            list[frameId] = null;\n            delete list[frameId];\n            return { ...list };\n          },\n        },\n      }),\n\n    [frameSetInitialResource]: (\n      state,\n      { payload: { frameId, resourceType, resourceId } }\n    ) =>\n      update(state, {\n        list: {\n          [frameId]: {\n            current: { $set: 0 },\n            path: { $set: [{ id: resourceId, schema: resourceType }] },\n          },\n        },\n      }),\n\n    [frameGoToResource]: (\n      state,\n      { payload: { frameId, resourceType, resourceId, smartJump } }\n    ) =>\n      update(state, {\n        list: {\n          [frameId]: {\n            $apply: frame => {\n              // If element is already in history, jump to it instead.\n              if (\n                smartJump &&\n                frame.path.filter(path => path.id === resourceId).length\n              ) {\n                const ids = frame.path.reduce((acc, next) => {\n                  acc.push(next.id);\n                  return acc;\n                }, []);\n\n                return update(frame, {\n                  current: { $set: ids.indexOf(resourceId) },\n                });\n              }\n\n              // The same as set initial resource.\n              if (frame.path.length === 0) {\n                return update(frame, {\n                  current: { $set: 0 },\n                  path: { $set: [{ id: resourceId, schema: resourceType }] },\n                });\n              }\n\n              // If not chop of lost history\n              const current = state.list[frameId].current || 0;\n              const newCurrent = current + 1;\n              const newPath = frame.path.slice(0, newCurrent);\n              newPath.push({ id: resourceId, schema: resourceType });\n              return update(frame, {\n                current: { $set: newCurrent },\n                path: { $set: newPath },\n              });\n            },\n          },\n        },\n      }),\n\n    [frameGoBack]: (state, { payload: { frameId } }) =>\n      update(state, {\n        list: {\n          [frameId]: {\n            current: {\n              $apply: current => (current === 0 ? 0 : current - 1),\n            },\n          },\n        },\n      }),\n\n    [frameGoForward]: (state, { payload: { frameId } }) =>\n      update(state, {\n        list: {\n          [frameId]: {\n            $apply: frame => {\n              if (frame.path.length - 1 <= frame.current) {\n                return frame;\n              }\n              return update(frame, {\n                current: { $set: frame.current + 1 },\n              });\n            },\n          },\n        },\n      }),\n\n    [frameEnableExtension]: (\n      state,\n      { payload: { extensionId, extensionConfig, frameId } }\n    ) =>\n      update(state, {\n        list: {\n          [frameId]: {\n            enabledExtensions: {\n              $apply: enabledExtensions =>\n                enabledExtensions.indexOf(extensionId) === -1\n                  ? [...enabledExtensions, extensionId]\n                  : enabledExtensions,\n            },\n            extensions: {\n              [extensionId]: { $set: extensionConfig },\n            },\n          },\n        },\n      }),\n\n    [frameConfigureExtension]: (\n      state,\n      { payload: { extensionId, extensionConfig, frameId } }\n    ) =>\n      update(state, {\n        list: {\n          [frameId]: {\n            extensions: {\n              [extensionId]: { $merge: extensionConfig },\n            },\n          },\n        },\n      }),\n\n    [frameDisableExtension]: (state, { payload: { extensionId, frameId } }) =>\n      update(state, {\n        list: {\n          [frameId]: {\n            enabledExtensions: {\n              $apply: enabledExtensions =>\n                enabledExtensions.reduce((acc, ext) => {\n                  if (ext !== extensionId) {\n                    acc.push(ext);\n                  }\n                  return acc;\n                }, []),\n            },\n          },\n        },\n      }),\n\n    [frameFocus]: (state, { payload: { frameId } }) =>\n      update(state, {\n        focusedFrame: { $set: frameId },\n      }),\n  },\n  DEFAULT_STATE\n);\n\n//function* saga() {\n// frameGoBackToType -> go to correct resource.\n// frameNextCanvas -> go to next canvas.\n// framePreviousCanvas -> go to previous canvas.\n//}\n\nexport {\n  // constants.\n  FRAME_CREATE,\n  FRAME_DELETE,\n  FRAME_SET_INITIAL_RESOURCE,\n  FRAME_GO_TO_RESOURCE,\n  FRAME_GO_BACK,\n  FRAME_GO_BACK_TO_TYPE,\n  FRAME_GO_FORWARD,\n  FRAME_ENABLE_EXTENSION,\n  FRAME_CONFIGURE_EXTENSION,\n  FRAME_DISABLE_EXTENSION,\n  FRAME_NEXT_CANVAS,\n  FRAME_PREVIOUS_CANVAS,\n  // actions.\n  frameCreate,\n  frameDelete,\n  frameSetInitialResource,\n  frameGoToResource,\n  frameGoBack,\n  frameGoBackToType,\n  frameGoForward,\n  frameEnableExtension,\n  frameConfigureExtension,\n  frameDisableExtension,\n  frameNextCanvas,\n  framePreviousCanvas,\n  frameFocus,\n  // redux.\n  // saga,\n  reducer,\n  DEFAULT_STATE,\n  DEFAULT_FRAME_ID,\n};\n\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/src/spaces/frames.js","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n/**\n * Move start canvas to sequence.\n *\n * This compatibility looks for a start canvas property on a manifest and\n * moves it to a sequence which will then become a valid manifest.\n *\n * If there are multiple sequences, it will look for the sequence in which\n * the start canvas exists.\n */\nexport default function moveStartCanvasToSequence(resource) {\n  if (resource['@type'] === 'sc:Manifest' && resource.startCanvas) {\n    // We have a start canvas that needs moved.\n    if (resource.sequences.length === 1) {\n      return _extends({}, resource, {\n        startCanvas: null,\n        sequences: [_extends({}, resource.sequences[0], {\n          startCanvas: resource.startCanvas\n        })]\n      });\n    } else {\n      // @todo handle multiple sequences.\n    }\n  }\n  return resource;\n}\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/compat/moveStartCanvasToSequence.js","import memoize from 'lodash.memoize';\nimport filterHtmlTags from './filterHtmlTags';\n\nvar normalizeSingleLanguageProperty = memoize(function (property, defaultLanguage) {\n  if (!property) {\n    return null;\n  }\n  if (typeof property === 'string') {\n    return [{ '@language': defaultLanguage, '@value': filterHtmlTags(property) }];\n  }\n  if (Array.isArray(property)) {\n    return null; // Invalid.\n  }\n  if (property['@value']) {\n    property['@value'] = filterHtmlTags(property['@value']);\n    // presentation 2.\n    return [property];\n  } else {\n    // presentation 3.\n    return Object.keys(property).reduce(function (acc, language) {\n      if (Array.isArray(property[language])) {\n        return [].concat(acc, property[language].map(function (value) {\n          return {\n            '@language': language === '@none' ? defaultLanguage : language,\n            '@value': filterHtmlTags(value)\n          };\n        }));\n      }\n      return [].concat(acc, [{\n        '@language': language === '@none' ? defaultLanguage : language,\n        '@value': filterHtmlTags(property[language])\n      }]);\n    }, []);\n  }\n});\n\nexport default normalizeSingleLanguageProperty;\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/compat/normalizeSingleLanguageProperty.js","import { saga as iiifResourceSaga } from './spaces/iiif-resource';\nimport { saga as collectionSaga } from './spaces/collections';\nimport { saga as manifestSaga } from './spaces/manifests';\n// import { saga as frameSaga } from './spaces/frames';\n\nvar sagas = [iiifResourceSaga, collectionSaga, manifestSaga];\n\nexport default sagas;\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/sagas.js","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createActions2, _handleActions;\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\n// Frames API.\nimport { createActions, handleActions } from 'redux-actions';\nimport update from 'immutability-helper';\n\nvar FRAME_CREATE = 'FRAME_CREATE';\nvar FRAME_DELETE = 'FRAME_DELETE';\nvar FRAME_SET_INITIAL_RESOURCE = 'FRAME_SET_INITIAL_RESOURCE';\nvar FRAME_GO_TO_RESOURCE = 'FRAME_GO_TO_RESOURCE';\nvar FRAME_GO_BACK = 'FRAME_GO_BACK';\nvar FRAME_GO_BACK_TO_TYPE = 'FRAME_GO_BACK_TO_TYPE';\nvar FRAME_GO_FORWARD = 'FRAME_GO_FORWARD';\nvar FRAME_ENABLE_EXTENSION = 'FRAME_ENABLE_EXTENSION';\nvar FRAME_CONFIGURE_EXTENSION = 'FRAME_CONFIGURE_EXTENSION';\nvar FRAME_DISABLE_EXTENSION = 'FRAME_DISABLE_EXTENSION';\nvar FRAME_NEXT_CANVAS = 'FRAME_NEXT_CANVAS';\nvar FRAME_PREVIOUS_CANVAS = 'FRAME_PREVIOUS_CANVAS';\nvar FRAME_FOCUS = 'FRAME_FOCUS';\n\nvar DEFAULT_STATE = {\n  list: {},\n  focusedFrame: null\n};\n\nvar DEFAULT_FRAME_ID = 'default-frame';\n\nvar requireProps = function requireProps(requiredProps) {\n  return function (retValue) {\n    /* istanbul ignore next line */\n    if (process.env.NODE_ENV === 'production') return retValue;\n\n    requiredProps.forEach(function (prop) {\n      if (!retValue[prop]) {\n        throw new Error('Dev error: missing required prop ' + prop);\n      }\n    });\n\n    return retValue;\n  };\n};\n\nvar _createActions = createActions((_createActions2 = {}, _createActions2[FRAME_CREATE] = function () {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var frameId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_FRAME_ID;\n\n  var resourceType = _ref.resourceType,\n      resourceId = _ref.resourceId,\n      config = _objectWithoutProperties(_ref, ['resourceType', 'resourceId']);\n\n  return requireProps(['frameId'])({\n    frameId: frameId,\n    resourceType: resourceType,\n    resourceId: resourceId,\n    config: config\n  });\n}, _createActions2[FRAME_DELETE] = function (frameId) {\n  return requireProps(['frameId'])({\n    frameId: frameId\n  });\n}, _createActions2[FRAME_SET_INITIAL_RESOURCE] = function () {\n  var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      resourceType = _ref2.resourceType,\n      resourceId = _ref2.resourceId;\n\n  var frameId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_FRAME_ID;\n  return requireProps(['resourceType', 'frameId', 'resourceId'])({\n    frameId: frameId,\n    resourceType: resourceType,\n    resourceId: resourceId\n  });\n}, _createActions2[FRAME_GO_TO_RESOURCE] = function () {\n  var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      resourceType = _ref3.resourceType,\n      resourceId = _ref3.resourceId,\n      _ref3$smartJump = _ref3.smartJump,\n      smartJump = _ref3$smartJump === undefined ? true : _ref3$smartJump;\n\n  var frameId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_FRAME_ID;\n  return requireProps(['resourceType', 'resourceId', 'frameId'])({\n    frameId: frameId,\n    resourceType: resourceType,\n    resourceId: resourceId,\n    smartJump: smartJump\n  });\n}, _createActions2[FRAME_GO_BACK] = function () {\n  var frameId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_FRAME_ID;\n  return requireProps(['frameId'])({ frameId: frameId });\n}, _createActions2[FRAME_GO_BACK_TO_TYPE] = function (resourceType) {\n  var frameId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_FRAME_ID;\n  return requireProps(['frameId', 'resourceType'])({\n    frameId: frameId,\n    resourceType: resourceType\n  });\n}, _createActions2[FRAME_GO_FORWARD] = function () {\n  var frameId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_FRAME_ID;\n  return requireProps(['frameId'])({ frameId: frameId });\n}, _createActions2[FRAME_ENABLE_EXTENSION] = function (extensionId, extensionConfig) {\n  var frameId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_FRAME_ID;\n  return requireProps(['extensionId', 'frameId'])({\n    extensionId: extensionId,\n    extensionConfig: extensionConfig,\n    frameId: frameId\n  });\n}, _createActions2[FRAME_CONFIGURE_EXTENSION] = function (extensionId, extensionConfig) {\n  var frameId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_FRAME_ID;\n  return requireProps(['extensionId', 'frameId'])({\n    extensionId: extensionId,\n    extensionConfig: extensionConfig,\n    frameId: frameId\n  });\n}, _createActions2[FRAME_DISABLE_EXTENSION] = function (extensionId) {\n  var frameId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_FRAME_ID;\n  return requireProps(['extensionId', 'frameId'])({\n    extensionId: extensionId,\n    frameId: frameId\n  });\n}, _createActions2[FRAME_NEXT_CANVAS] = function () {\n  var frameId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_FRAME_ID;\n  return requireProps(['frameId'])({\n    frameId: frameId\n  });\n}, _createActions2[FRAME_PREVIOUS_CANVAS] = function () {\n  var frameId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_FRAME_ID;\n  return requireProps(['frameId'])({\n    frameId: frameId\n  });\n}, _createActions2[FRAME_FOCUS] = function () {\n  var frameId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_FRAME_ID;\n  return requireProps(['frameId'])({\n    frameId: frameId\n  });\n}, _createActions2)),\n    frameCreate = _createActions.frameCreate,\n    frameDelete = _createActions.frameDelete,\n    frameSetInitialResource = _createActions.frameSetInitialResource,\n    frameGoToResource = _createActions.frameGoToResource,\n    frameGoBack = _createActions.frameGoBack,\n    frameGoBackToType = _createActions.frameGoBackToType,\n    frameGoForward = _createActions.frameGoForward,\n    frameEnableExtension = _createActions.frameEnableExtension,\n    frameConfigureExtension = _createActions.frameConfigureExtension,\n    frameDisableExtension = _createActions.frameDisableExtension,\n    frameNextCanvas = _createActions.frameNextCanvas,\n    framePreviousCanvas = _createActions.framePreviousCanvas,\n    frameFocus = _createActions.frameFocus;\n\nvar reducer = handleActions((_handleActions = {}, _handleActions[frameCreate] = function (state, _ref4) {\n  var _list;\n\n  var _ref4$payload = _ref4.payload,\n      frameId = _ref4$payload.frameId,\n      resourceType = _ref4$payload.resourceType,\n      resourceId = _ref4$payload.resourceId,\n      config = _ref4$payload.config;\n  return update(state, {\n    focusedFrame: { $set: frameId },\n    list: (_list = {}, _list[frameId] = {\n      $set: {\n        id: frameId,\n        current: 0,\n        path: resourceId && resourceType ? [{ id: resourceId, schema: resourceType }] : [],\n        enabledExtensions: [],\n        extensions: {},\n        config: config\n      }\n    }, _list)\n  });\n}, _handleActions[frameDelete] = function (state, _ref5) {\n  var frameId = _ref5.payload.frameId;\n  return update(state, {\n    focusedFrame: {\n      $apply: function $apply(focusedFrame) {\n        return focusedFrame === frameId ? null : focusedFrame;\n      }\n    },\n    list: {\n      $apply: function $apply(list) {\n        list[frameId] = null;\n        delete list[frameId];\n        return _extends({}, list);\n      }\n    }\n  });\n}, _handleActions[frameSetInitialResource] = function (state, _ref6) {\n  var _list2;\n\n  var _ref6$payload = _ref6.payload,\n      frameId = _ref6$payload.frameId,\n      resourceType = _ref6$payload.resourceType,\n      resourceId = _ref6$payload.resourceId;\n  return update(state, {\n    list: (_list2 = {}, _list2[frameId] = {\n      current: { $set: 0 },\n      path: { $set: [{ id: resourceId, schema: resourceType }] }\n    }, _list2)\n  });\n}, _handleActions[frameGoToResource] = function (state, _ref7) {\n  var _list3;\n\n  var _ref7$payload = _ref7.payload,\n      frameId = _ref7$payload.frameId,\n      resourceType = _ref7$payload.resourceType,\n      resourceId = _ref7$payload.resourceId,\n      smartJump = _ref7$payload.smartJump;\n  return update(state, {\n    list: (_list3 = {}, _list3[frameId] = {\n      $apply: function $apply(frame) {\n        // If element is already in history, jump to it instead.\n        if (smartJump && frame.path.filter(function (path) {\n          return path.id === resourceId;\n        }).length) {\n          var ids = frame.path.reduce(function (acc, next) {\n            acc.push(next.id);\n            return acc;\n          }, []);\n\n          return update(frame, {\n            current: { $set: ids.indexOf(resourceId) }\n          });\n        }\n\n        // The same as set initial resource.\n        if (frame.path.length === 0) {\n          return update(frame, {\n            current: { $set: 0 },\n            path: { $set: [{ id: resourceId, schema: resourceType }] }\n          });\n        }\n\n        // If not chop of lost history\n        var current = state.list[frameId].current || 0;\n        var newCurrent = current + 1;\n        var newPath = frame.path.slice(0, newCurrent);\n        newPath.push({ id: resourceId, schema: resourceType });\n        return update(frame, {\n          current: { $set: newCurrent },\n          path: { $set: newPath }\n        });\n      }\n    }, _list3)\n  });\n}, _handleActions[frameGoBack] = function (state, _ref8) {\n  var _list4;\n\n  var frameId = _ref8.payload.frameId;\n  return update(state, {\n    list: (_list4 = {}, _list4[frameId] = {\n      current: {\n        $apply: function $apply(current) {\n          return current === 0 ? 0 : current - 1;\n        }\n      }\n    }, _list4)\n  });\n}, _handleActions[frameGoForward] = function (state, _ref9) {\n  var _list5;\n\n  var frameId = _ref9.payload.frameId;\n  return update(state, {\n    list: (_list5 = {}, _list5[frameId] = {\n      $apply: function $apply(frame) {\n        if (frame.path.length - 1 <= frame.current) {\n          return frame;\n        }\n        return update(frame, {\n          current: { $set: frame.current + 1 }\n        });\n      }\n    }, _list5)\n  });\n}, _handleActions[frameEnableExtension] = function (state, _ref10) {\n  var _extensions, _list6;\n\n  var _ref10$payload = _ref10.payload,\n      extensionId = _ref10$payload.extensionId,\n      extensionConfig = _ref10$payload.extensionConfig,\n      frameId = _ref10$payload.frameId;\n  return update(state, {\n    list: (_list6 = {}, _list6[frameId] = {\n      enabledExtensions: {\n        $apply: function $apply(enabledExtensions) {\n          return enabledExtensions.indexOf(extensionId) === -1 ? [].concat(enabledExtensions, [extensionId]) : enabledExtensions;\n        }\n      },\n      extensions: (_extensions = {}, _extensions[extensionId] = { $set: extensionConfig }, _extensions)\n    }, _list6)\n  });\n}, _handleActions[frameConfigureExtension] = function (state, _ref11) {\n  var _extensions2, _list7;\n\n  var _ref11$payload = _ref11.payload,\n      extensionId = _ref11$payload.extensionId,\n      extensionConfig = _ref11$payload.extensionConfig,\n      frameId = _ref11$payload.frameId;\n  return update(state, {\n    list: (_list7 = {}, _list7[frameId] = {\n      extensions: (_extensions2 = {}, _extensions2[extensionId] = { $merge: extensionConfig }, _extensions2)\n    }, _list7)\n  });\n}, _handleActions[frameDisableExtension] = function (state, _ref12) {\n  var _list8;\n\n  var _ref12$payload = _ref12.payload,\n      extensionId = _ref12$payload.extensionId,\n      frameId = _ref12$payload.frameId;\n  return update(state, {\n    list: (_list8 = {}, _list8[frameId] = {\n      enabledExtensions: {\n        $apply: function $apply(enabledExtensions) {\n          return enabledExtensions.reduce(function (acc, ext) {\n            if (ext !== extensionId) {\n              acc.push(ext);\n            }\n            return acc;\n          }, []);\n        }\n      }\n    }, _list8)\n  });\n}, _handleActions[frameFocus] = function (state, _ref13) {\n  var frameId = _ref13.payload.frameId;\n  return update(state, {\n    focusedFrame: { $set: frameId }\n  });\n}, _handleActions), DEFAULT_STATE);\n\n//function* saga() {\n// frameGoBackToType -> go to correct resource.\n// frameNextCanvas -> go to next canvas.\n// framePreviousCanvas -> go to previous canvas.\n//}\n\nexport {\n// constants.\nFRAME_CREATE, FRAME_DELETE, FRAME_SET_INITIAL_RESOURCE, FRAME_GO_TO_RESOURCE, FRAME_GO_BACK, FRAME_GO_BACK_TO_TYPE, FRAME_GO_FORWARD, FRAME_ENABLE_EXTENSION, FRAME_CONFIGURE_EXTENSION, FRAME_DISABLE_EXTENSION, FRAME_NEXT_CANVAS, FRAME_PREVIOUS_CANVAS,\n// actions.\nframeCreate, frameDelete, frameSetInitialResource, frameGoToResource, frameGoBack, frameGoBackToType, frameGoForward, frameEnableExtension, frameConfigureExtension, frameDisableExtension, frameNextCanvas, framePreviousCanvas, frameFocus,\n// redux.\n// saga,\nreducer, DEFAULT_STATE, DEFAULT_FRAME_ID };\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/spaces/frames.js","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nimport traverse from 'traverse';\nimport hash from 'object-hash';\n\nexport default function addMissingIds(jsonLd) {\n  traverse(jsonLd).forEach(function (obj) {\n    if ((obj['@type'] === 'oa:Annotation' || obj['@type'] === 'sc:Sequence' || obj['@type'] === 'oa:Choice') && !obj['@id']) {\n      this.update(_extends({}, obj, { '@id': 'https://' + hash(obj) }));\n    }\n  });\n  return jsonLd;\n}\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/compat/addMissingIds.js","var _handleActions;\n\n/**\n * Routing\n *\n * The basic actions of routing are:\n * - Select\n * - Next\n * - Previous\n * - Deselect\n *\n * This file defines all of the constants and actions for\n * triggering and setting the state for routing.\n *\n * Each individual resource should add support for next / previous\n * to their redux sagas, this may also be context specific, so is out\n * of the scope of this. They should end up dispatching a select when\n * next or previous is triggered.\n */\nimport { createAction, handleActions } from 'redux-actions';\nimport update from 'immutability-helper';\n\n// Collections\nvar ROUTING_SELECT_COLLECTION = 'ROUTING_SELECT_COLLECTION';\nvar ROUTING_NEXT_COLLECTION = 'ROUTING_NEXT_COLLECTION';\nvar ROUTING_PREVIOUS_COLLECTION = 'ROUTING_PREVIOUS_COLLECTION';\nvar ROUTING_DESELECT_COLLECTION = 'ROUTING_DESELECT_COLLECTION';\n\n// Manifests\nvar ROUTING_SELECT_MANIFEST = 'ROUTING_SELECT_MANIFEST';\nvar ROUTING_NEXT_MANIFEST = 'ROUTING_NEXT_MANIFEST';\nvar ROUTING_PREVIOUS_MANIFEST = 'ROUTING_PREVIOUS_MANIFEST';\nvar ROUTING_DESELECT_MANIFEST = 'ROUTING_DESELECT_MANIFEST';\n\n// Sequence\nvar ROUTING_SELECT_SEQUENCE = 'ROUTING_SELECT_SEQUENCE';\nvar ROUTING_NEXT_SEQUENCE = 'ROUTING_NEXT_SEQUENCE';\nvar ROUTING_PREVIOUS_SEQUENCE = 'ROUTING_PREVIOUS_SEQUENCE';\nvar ROUTING_DESELECT_SEQUENCE = 'ROUTING_DESELECT_SEQUENCE';\n\n// Canvas\nvar ROUTING_SELECT_CANVAS = 'ROUTING_SELECT_CANVAS';\nvar ROUTING_NEXT_CANVAS = 'ROUTING_NEXT_CANVAS';\nvar ROUTING_PREVIOUS_CANVAS = 'ROUTING_PREVIOUS_CANVAS';\nvar ROUTING_DESELECT_CANVAS = 'ROUTING_DESELECT_CANVAS';\n\n// Annotation list\nvar ROUTING_SELECT_ANNOTATION_LIST = 'ROUTING_SELECT_ANNOTATION_LIST';\nvar ROUTING_NEXT_ANNOTATION_LIST = 'ROUTING_NEXT_ANNOTATION_LIST';\nvar ROUTING_PREVIOUS_ANNOTATION_LIST = 'ROUTING_PREVIOUS_ANNOTATION_LIST';\nvar ROUTING_DESELECT_ANNOTATION_LIST = 'ROUTING_DESELECT_ANNOTATION_LIST';\n\n// Annotation\nvar ROUTING_SELECT_ANNOTATION = 'ROUTING_SELECT_ANNOTATION';\nvar ROUTING_NEXT_ANNOTATION = 'ROUTING_NEXT_ANNOTATION';\nvar ROUTING_PREVIOUS_ANNOTATION = 'ROUTING_PREVIOUS_ANNOTATION';\nvar ROUTING_DESELECT_ANNOTATION = 'ROUTING_DESELECT_ANNOTATION';\n\n// Range\nvar ROUTING_SELECT_RANGE = 'ROUTING_SELECT_RANGE';\nvar ROUTING_NEXT_RANGE = 'ROUTING_NEXT_RANGE';\nvar ROUTING_PREVIOUS_RANGE = 'ROUTING_PREVIOUS_RANGE';\nvar ROUTING_DESELECT_RANGE = 'ROUTING_DESELECT_RANGE';\n\n// Layer\nvar ROUTING_SELECT_LAYER = 'ROUTING_SELECT_LAYER';\nvar ROUTING_NEXT_LAYER = 'ROUTING_NEXT_LAYER';\nvar ROUTING_PREVIOUS_LAYER = 'ROUTING_PREVIOUS_LAYER';\nvar ROUTING_DESELECT_LAYER = 'ROUTING_DESELECT_LAYER';\n\n// Image resource\nvar ROUTING_SELECT_IMAGE_RESOURCE = 'ROUTING_SELECT_IMAGE_RESOURCE';\nvar ROUTING_NEXT_IMAGE_RESOURCE = 'ROUTING_NEXT_IMAGE_RESOURCE';\nvar ROUTING_PREVIOUS_IMAGE_RESOURCE = 'ROUTING_PREVIOUS_IMAGE_RESOURCE';\nvar ROUTING_DESELECT_IMAGE_RESOURCE = 'ROUTING_DESELECT_IMAGE_RESOURCE';\n\nvar DEFAULT_STATE = {\n  currentSequence: null,\n  currentManifest: null,\n  currentCanvas: null,\n  currentAnnotationList: null,\n  currentAnnotation: null,\n  currentRange: null,\n  currentLayer: null,\n  currentImageResource: null,\n  currentCollection: null\n};\n\nvar selectCollection = createAction(ROUTING_SELECT_COLLECTION);\nvar nextCollection = createAction(ROUTING_NEXT_COLLECTION);\nvar previousCollection = createAction(ROUTING_PREVIOUS_COLLECTION);\nvar deselectCollection = createAction(ROUTING_DESELECT_COLLECTION);\nvar selectManifest = createAction(ROUTING_SELECT_MANIFEST);\nvar nextManifest = createAction(ROUTING_NEXT_MANIFEST);\nvar previousManifest = createAction(ROUTING_PREVIOUS_MANIFEST);\nvar deselectManifest = createAction(ROUTING_DESELECT_MANIFEST);\nvar selectSequence = createAction(ROUTING_SELECT_SEQUENCE);\nvar nextSequence = createAction(ROUTING_NEXT_SEQUENCE);\nvar previousSequence = createAction(ROUTING_PREVIOUS_SEQUENCE);\nvar deselectSequence = createAction(ROUTING_DESELECT_SEQUENCE);\nvar selectCanvas = createAction(ROUTING_SELECT_CANVAS);\nvar nextCanvas = createAction(ROUTING_NEXT_CANVAS);\nvar previousCanvas = createAction(ROUTING_PREVIOUS_CANVAS);\nvar deselectCanvas = createAction(ROUTING_DESELECT_CANVAS);\nvar selectAnnotationList = createAction(ROUTING_SELECT_ANNOTATION_LIST);\nvar nextAnnotationList = createAction(ROUTING_NEXT_ANNOTATION_LIST);\nvar previousAnnotationList = createAction(ROUTING_PREVIOUS_ANNOTATION_LIST);\nvar deselectAnnotationList = createAction(ROUTING_DESELECT_ANNOTATION_LIST);\nvar selectAnnotation = createAction(ROUTING_SELECT_ANNOTATION);\nvar nextAnnotation = createAction(ROUTING_NEXT_ANNOTATION);\nvar previousAnnotation = createAction(ROUTING_PREVIOUS_ANNOTATION);\nvar deselectAnnotation = createAction(ROUTING_DESELECT_ANNOTATION);\nvar selectRange = createAction(ROUTING_SELECT_RANGE);\nvar nextRange = createAction(ROUTING_NEXT_RANGE);\nvar previousRange = createAction(ROUTING_PREVIOUS_RANGE);\nvar deselectRange = createAction(ROUTING_DESELECT_RANGE);\nvar selectLayer = createAction(ROUTING_SELECT_LAYER);\nvar nextLayer = createAction(ROUTING_NEXT_LAYER);\nvar previousLayer = createAction(ROUTING_PREVIOUS_LAYER);\nvar deselectLayer = createAction(ROUTING_DESELECT_LAYER);\nvar selectImageResource = createAction(ROUTING_SELECT_IMAGE_RESOURCE);\nvar nextImageResource = createAction(ROUTING_NEXT_IMAGE_RESOURCE);\nvar previousImageResource = createAction(ROUTING_PREVIOUS_IMAGE_RESOURCE);\nvar deselectImageResource = createAction(ROUTING_DESELECT_IMAGE_RESOURCE);\n\nvar selectUpdater = function selectUpdater(resource) {\n  return function (state, _ref) {\n    var _update;\n\n    var payload = _ref.payload;\n    return update(state, (_update = {}, _update['current' + resource] = { $set: payload.id }, _update));\n  };\n};\n\nvar deselectUpdater = function deselectUpdater(resource) {\n  return function (state) {\n    var _update2;\n\n    return update(state, (_update2 = {}, _update2['current' + resource] = { $set: null }, _update2));\n  };\n};\n\nvar reducer = handleActions((_handleActions = {}, _handleActions[selectCollection] = selectUpdater('Collection'), _handleActions[deselectCollection] = deselectUpdater('Collection'), _handleActions[selectManifest] = selectUpdater('Manifest'), _handleActions[deselectManifest] = deselectUpdater('Manifest'), _handleActions[selectSequence] = selectUpdater('Sequence'), _handleActions[deselectSequence] = deselectUpdater('Sequence'), _handleActions[selectCanvas] = selectUpdater('Canvas'), _handleActions[deselectCanvas] = deselectUpdater('Canvas'), _handleActions[selectAnnotationList] = selectUpdater('AnnotationList'), _handleActions[deselectAnnotationList] = deselectUpdater('AnnotationList'), _handleActions[selectAnnotation] = selectUpdater('Annotation'), _handleActions[deselectAnnotation] = deselectUpdater('Annotation'), _handleActions[selectRange] = selectUpdater('Range'), _handleActions[deselectRange] = deselectUpdater('Range'), _handleActions[selectLayer] = selectUpdater('Layer'), _handleActions[deselectLayer] = deselectUpdater('Layer'), _handleActions[selectImageResource] = selectUpdater('ImageResource'), _handleActions[deselectImageResource] = deselectUpdater('ImageResource'), _handleActions), DEFAULT_STATE);\n\nexport { reducer, DEFAULT_STATE,\n// Actions.\nselectCollection, nextCollection, previousCollection, deselectCollection, selectManifest, nextManifest, previousManifest, deselectManifest, selectSequence, nextSequence, previousSequence, deselectSequence, selectCanvas, nextCanvas, previousCanvas, deselectCanvas, selectAnnotationList, nextAnnotationList, previousAnnotationList, deselectAnnotationList, selectAnnotation, nextAnnotation, previousAnnotation, deselectAnnotation, selectRange, nextRange, previousRange, deselectRange, selectLayer, nextLayer, previousLayer, deselectLayer, selectImageResource, nextImageResource, previousImageResource, deselectImageResource, ROUTING_SELECT_COLLECTION, ROUTING_NEXT_COLLECTION, ROUTING_PREVIOUS_COLLECTION, ROUTING_DESELECT_COLLECTION, ROUTING_SELECT_MANIFEST, ROUTING_NEXT_MANIFEST, ROUTING_PREVIOUS_MANIFEST, ROUTING_DESELECT_MANIFEST, ROUTING_SELECT_SEQUENCE, ROUTING_NEXT_SEQUENCE, ROUTING_PREVIOUS_SEQUENCE, ROUTING_DESELECT_SEQUENCE, ROUTING_SELECT_CANVAS, ROUTING_NEXT_CANVAS, ROUTING_PREVIOUS_CANVAS, ROUTING_DESELECT_CANVAS, ROUTING_SELECT_ANNOTATION_LIST, ROUTING_NEXT_ANNOTATION_LIST, ROUTING_PREVIOUS_ANNOTATION_LIST, ROUTING_DESELECT_ANNOTATION_LIST, ROUTING_SELECT_ANNOTATION, ROUTING_NEXT_ANNOTATION, ROUTING_PREVIOUS_ANNOTATION, ROUTING_DESELECT_ANNOTATION, ROUTING_SELECT_RANGE, ROUTING_NEXT_RANGE, ROUTING_PREVIOUS_RANGE, ROUTING_DESELECT_RANGE, ROUTING_SELECT_LAYER, ROUTING_NEXT_LAYER, ROUTING_PREVIOUS_LAYER, ROUTING_DESELECT_LAYER, ROUTING_SELECT_IMAGE_RESOURCE, ROUTING_NEXT_IMAGE_RESOURCE, ROUTING_PREVIOUS_IMAGE_RESOURCE, ROUTING_DESELECT_IMAGE_RESOURCE,\n// Misc\nselectUpdater, deselectUpdater };\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/spaces/routing.js","import striptags from 'striptags';\n\nvar filterHtmlTags = function filterHtmlTags(str) {\n  var allowed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['a', 'b', 'br', 'i', 'img', 'p'];\n  var replacement = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n  return Array.isArray(str) ? str.map(function (s) {\n    return filterHtmlTags(s, allowed, replacement);\n  }) : striptags(str, allowed, replacement);\n};\n\nexport default filterHtmlTags;\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/compat/filterHtmlTags.js","import memoize from 'lodash.memoize';\nimport validUrl from 'valid-url';\n\nvar normalizeLinkedResourceToObject = memoize(function (property) {\n  if (!property) {\n    return null;\n  }\n  if (property['@value'] || property['@id']) {\n    // presentation 2.\n    return [property];\n  }\n  if (typeof property === 'string') {\n    if (!validUrl.isWebUri(property)) {\n      return null;\n    }\n    return [{ '@id': property }];\n  }\n  if (Array.isArray(property)) {\n    return normalizeLinkedResourceToObject(property[0]); // only allow one value?\n  }\n  return null;\n});\n\nexport default normalizeLinkedResourceToObject;\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/compat/normalizeLinkedResourceToObject.js","import { createStore } from 'iiif-redux';\nimport { Provider } from 'react-redux';\nimport React from 'react';\nimport { render } from 'react-dom';\nimport App from './components/App/App';\n\nconst debug = require('debug')('iiif-redux');\n\n// Development debugging.\nif (window.localStorage && process.env.NODE_ENV === 'development') {\n  window.localStorage.debug = process.env.DEBUG;\n}\nif (process.env.NODE_ENV === 'development') {\n  debug(\n    'Running in development',\n    `v${process.env.__VERSION__} (${process.env.HASH.slice(0, 7)})`\n  );\n  debug('Debug level:', process.env.DEBUG);\n}\n\nif (process.env.NODE_ENV === 'production') {\n  console.log(\n    `Running in production v${process.env.__VERSION__}`,\n    `(${process.env.HASH.slice(0, 7)})`\n  );\n}\n\nconst store = createStore();\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.querySelector('#app')\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import normalizeLinkedResources from './normalizeLinkedResources';\nimport normalizeLanguageProperty from './normalizeLanguageProperty';\nimport normalizeMetadataProperty from './normalizeMetadataProperty';\nimport traverse from 'traverse';\n\nvar preprocessLinkedEntities = function preprocessLinkedEntities(value) {\n  traverse(value).forEach(function (entryValue) {\n    switch (this.key) {\n      // Descriptive\n      case 'label':\n      case 'description':\n      case 'attribution':\n        this.update(normalizeLanguageProperty(entryValue, 'en'));\n        break;\n\n      case 'metadata':\n        this.update(normalizeMetadataProperty(entryValue, 'en'));\n        break;\n\n      case 'seeAlso':\n      case 'service':\n      case 'related':\n      case 'rendering':\n      case 'within':\n        this.update(normalizeLinkedResources(entryValue));\n        break;\n\n      case 'startCanvas':\n      case 'first':\n      case 'last':\n      case 'next':\n      case 'prev':\n        var linkedResources = normalizeLinkedResources(entryValue);\n        this.update(linkedResources && linkedResources.length ? linkedResources[0] : null);\n        break;\n\n      default:\n        break;\n    }\n  });\n  return value;\n};\n\nexport default preprocessLinkedEntities;\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/compat/preprocessLinkedEntities.js","// Frame API.\nimport memoize from 'lodash.memoize';\nimport { createSelector, createStructuredSelector } from 'reselect';\nimport { DEFAULT_FRAME_ID } from '../spaces/frames';\nimport resourceListSelectorFactory from '../utility/resourceListSelectorFactory';\n\nvar frame = function frame(selector) {\n  // Metadata API.\n  var getId = createSelector(selector, function (currentFrame) {\n    return currentFrame.id;\n  });\n  var isFocused = createSelector(getId, function (state) {\n    return state.frames.focusedFrame;\n  }, function (currentFrameId, focusedFrameId) {\n    return focusedFrameId === currentFrameId;\n  });\n  // @todo first extension - metadata\n  // const getLabel = noop;\n  // const getDescription = noop;\n\n  // Current API.\n  var getCurrentPath = createSelector(selector, function (currentFrame) {\n    return currentFrame.path;\n  });\n  var getCurrentPathIndex = createSelector(selector, function (currentFrame) {\n    return currentFrame.current;\n  });\n  var getCurrentResource = createSelector(getCurrentPath, getCurrentPathIndex, function (currentPath, currentIndex) {\n    return currentPath[currentIndex];\n  });\n  var getCurrentResourceId = createSelector(getCurrentResource, function (currentResource) {\n    return currentResource ? currentResource.id : null;\n  });\n  var getCurrentResourceType = createSelector(getCurrentResource, function (currentResource) {\n    return currentResource ? currentResource.schema : null;\n  });\n  var getCurrentResourceByType = memoize(function (schema) {\n    return createSelector(getCurrentPath, function (path) {\n      return path.reduce(function (acc, next) {\n        return next.schema === schema ? next : acc;\n      }, null);\n    });\n  });\n\n  // History API.\n  var getTopLevel = createSelector(getCurrentPath, function (currentPath) {\n    return currentPath[0] || null;\n  });\n  var getAllTypes = createSelector(getCurrentPath, function (currentPath) {\n    return currentPath.reduce(function (types, path) {\n      if (types.indexOf(path.schema) === -1) {\n        types.push(path.schema);\n      }\n      return types;\n    }, []);\n  });\n  var canGoBack = createSelector(getCurrentPathIndex, function (pathIndex) {\n    return pathIndex > 0;\n  });\n  var canGoForward = createSelector(getCurrentPath, getCurrentPathIndex, function (currentPath, currentIndex) {\n    return currentPath.length === 0 ? false : currentPath.length - 1 > currentIndex;\n  });\n  var getHistory = createSelector(getCurrentPath, getCurrentPathIndex, function (currentPath, currentIndex) {\n    return currentPath.length ? currentPath.slice(0, currentIndex) : [];\n  });\n  var getFullHistory = getCurrentPath;\n  var canGoBackToType = memoize(function (schema) {\n    return createSelector(getHistory, function (history) {\n      return history.filter(function (pathItem) {\n        return pathItem.schema === schema;\n      }).length > 0;\n    });\n  });\n\n  // Extensions API.\n  var getAllExtensionsInternal = createSelector(selector, function (currentFrame) {\n    return currentFrame.extensions;\n  });\n  var getAllExtensionIds = createSelector(selector, function (currentFrame) {\n    return Object.keys(currentFrame.extensions);\n  });\n  var mapSingleExtension = function mapSingleExtension(state, allExtensions, id) {\n    if (!allExtensions[id]) {\n      return { id: id };\n    }\n    if (typeof allExtensions[id] === 'string' && state[id] && state[id][allExtensions[id]]) {\n      return { id: id, config: state[id][allExtensions[id]] };\n    }\n    return { id: id, config: allExtensions[id] };\n  };\n  var getAllExtensions = createSelector(getAllExtensionIds, getAllExtensionsInternal, function (state) {\n    return state;\n  }, function (extensionIds, allExtensions, state) {\n    return extensionIds.map(function (id) {\n      return mapSingleExtension(state, allExtensions, id);\n    });\n  });\n  var getExtensionById = function getExtensionById(id) {\n    return createSelector(getAllExtensionsInternal, function (state) {\n      return state;\n    }, function (allExtensions, state) {\n      return mapSingleExtension(state, allExtensions, id);\n    });\n  };\n\n  var getEnabledExtensionIds = createSelector(selector, function (currentFrame) {\n    return currentFrame.enabledExtensions;\n  });\n  var isExtensionEnabled = memoize(function (id) {\n    return createSelector(getEnabledExtensionIds, function (enabledExtensions) {\n      return enabledExtensions.indexOf(id) !== -1;\n    });\n  });\n  var getDisabledExtensionIds = createSelector(getAllExtensionIds, getEnabledExtensionIds, function (allExtensionIds, enabledExtensionIds) {\n    return allExtensionIds.reduce(function (disabled, ext) {\n      if (enabledExtensionIds.indexOf(ext) === -1) {\n        disabled.push(ext);\n      }\n      return disabled;\n    }, []);\n  });\n  var getDisabledExtensions = createSelector(getDisabledExtensionIds, getAllExtensionsInternal, function (state) {\n    return state;\n  }, function (extensionIds, allExtensions, state) {\n    return extensionIds.map(function (id) {\n      return mapSingleExtension(state, allExtensions, id);\n    });\n  });\n  var getEnabledExtensions = createSelector(getEnabledExtensionIds, getAllExtensionsInternal, function (state) {\n    return state;\n  }, function (extensionIds, allExtensions, state) {\n    return extensionIds.map(function (id) {\n      return mapSingleExtension(state, allExtensions, id);\n    });\n  });\n  // const getExtensionApi = noop; // @todo come back to.\n\n  // @todo Some resource helpers.\n  // const isNavigatingCanvases = noop;\n  // const getCurrentCanvasId = noop;\n  // const getCurrentCanvas = noop;\n  // const isNavigatingManifests = noop;\n  // const getCurrentManifestId = noop;\n  // const getCurrentManifest = noop;\n\n  return {\n    // Metadata API.\n    getId: getId,\n    isFocused: isFocused,\n\n    // Current API.\n    getCurrentPath: getCurrentPath,\n    getCurrentPathIndex: getCurrentPathIndex,\n    getCurrentResource: getCurrentResource,\n    getCurrentResourceId: getCurrentResourceId,\n    getCurrentResourceType: getCurrentResourceType,\n    getCurrentResourceByType: getCurrentResourceByType,\n\n    // History API.\n    getTopLevel: getTopLevel,\n    getAllTypes: getAllTypes,\n    canGoBack: canGoBack,\n    canGoForward: canGoForward,\n    getHistory: getHistory,\n    getFullHistory: getFullHistory,\n    canGoBackToType: canGoBackToType,\n\n    // Extensions API.\n    getAllExtensionIds: getAllExtensionIds,\n    getAllExtensions: getAllExtensions,\n    getExtensionById: getExtensionById,\n    isExtensionEnabled: isExtensionEnabled,\n    getDisabledExtensions: getDisabledExtensions,\n    getEnabledExtensions: getEnabledExtensions\n    // getExtensionApi,\n\n    // Some resource helpers.\n    // isNavigatingCanvases,\n    // getCurrentCanvasId,\n    // getCurrentCanvas,\n    // isNavigatingManifests,\n    // getCurrentManifestId,\n    // getCurrentManifest,\n  };\n};\n\nexport default frame;\n\n// Allows for Window interface.\nexport var frameByIdSelector = memoize(function (callable) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$getId = _ref.getId,\n      getId = _ref$getId === undefined ? null : _ref$getId;\n\n  return function (state, props) {\n    var id = getId ? getId(state, props) : props ? props.frameId : DEFAULT_FRAME_ID;\n\n    var selectorOrStructure = callable(frame(function (s) {\n      return s.frames.list[id];\n    }));\n\n    return (selectorOrStructure && {}.toString.call(selectorOrStructure) === '[object Function]' ? function (selector) {\n      return function (passThroughState) {\n        return selector(passThroughState);\n      };\n    } : createStructuredSelector)(selectorOrStructure)(state);\n  };\n});\n\nexport var getFocusedFrameId = function getFocusedFrameId(state) {\n  return state.frames.focusedFrame;\n};\n\nexport var getAllFrames = function getAllFrames(state) {\n  return state.frames.list;\n};\n\nexport var getAllFrameIds = createSelector(getAllFrames, function (frames) {\n  return Object.keys(frames);\n});\n\nexport var getFocusedFrame = createSelector(getFocusedFrameId, getAllFrames, function (id, frames) {\n  return frames[id];\n});\n\nexport var focusedFrame = function focusedFrame(api) {\n  return function (state, props) {\n    var focusedFrameId = getFocusedFrameId(state);\n    if (!focusedFrameId) {\n      return null;\n    }\n    return createStructuredSelector(api(frame(getFocusedFrame)))(state, props);\n  };\n};\n\nexport var frames = resourceListSelectorFactory(getAllFrames, frame);\n\n/*\n@todo check feasibility of this. Shouldn't be needed with simplified model.\n\nexport function registerFrameExtension(\n  name,\n  getFrameState = null,\n  provideCustomApi = null,\n  actions = {}\n) {\n  // name is the ID used for the KEY. Could be URI?\n  // getFrameState is the `(extensionId, frameId) => state => state.myCustomRedux[extensionId]`\n  // provide custom API is a IIIF Redux standard selector format. `api => selector => state => stateSubset`\n  // actions will be wrapped in dispatch and given to component, possibly?\n}\n\nexport function connectFrameBehaviours(\n  connect,\n  extensions,\n  mapStateToProps = null,\n  mapDispatchToProps = null\n) {\n  // HOC for injecting actions + state, itself will wrap connect.\n}\n*/\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/api/frame.js","import _regeneratorRuntime from 'babel-runtime/regenerator';\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(fetchManifest),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(saga);\n\nimport { put, all, takeEvery } from 'redux-saga/effects';\nimport { ROUTING_SELECT_MANIFEST } from './routing';\nimport { manifest } from '../schema/presentation2';\nimport { iiifResourceRequest } from './iiif-resource';\n\nvar MANIFEST_REQUEST = 'MANIFEST_REQUEST';\nvar MANIFEST_SUCCESS = 'MANIFEST_SUCCESS';\nvar MANIFEST_ERROR = 'MANIFEST_ERROR';\n\nfunction fetchManifest(_ref) {\n  var id = _ref.payload.id;\n  return _regeneratorRuntime.wrap(function fetchManifest$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return put(iiifResourceRequest(id, [MANIFEST_REQUEST, MANIFEST_SUCCESS, MANIFEST_ERROR], manifest));\n\n        case 2:\n        case 'end':\n          return _context.stop();\n      }\n    }\n  }, _marked, this);\n}\n\nfunction saga() {\n  return _regeneratorRuntime.wrap(function saga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return all([takeEvery(ROUTING_SELECT_MANIFEST, fetchManifest)]);\n\n        case 2:\n        case 'end':\n          return _context2.stop();\n      }\n    }\n  }, _marked2, this);\n}\n\nexport { MANIFEST_SUCCESS, MANIFEST_REQUEST, MANIFEST_ERROR, saga };\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/spaces/manifests.js","import _regeneratorRuntime from 'babel-runtime/regenerator';\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(fetchCollection),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(saga);\n\n/**\n * Collections space\n *\n * The logic for collections.\n *\n * What is known:\n * - Collections can contain manifests\n * - Collections can contain other collections\n *\n * Interactions:\n * - When collection is selected, it should be loaded if its not already.\n *\n * Needs planning:\n * - Next/Prev\n */\nimport { put, all, takeEvery } from 'redux-saga/effects';\nimport { ROUTING_SELECT_COLLECTION } from './routing';\nimport { collection } from '../schema/presentation2';\nimport { iiifResourceRequest } from './iiif-resource';\n\nvar COLLECTION_REQUEST = 'COLLECTION_REQUEST';\nvar COLLECTION_SUCCESS = 'COLLECTION_SUCCESS';\nvar COLLECTION_ERROR = 'COLLECTION_ERROR';\n\nfunction fetchCollection(_ref) {\n  var id = _ref.payload.id;\n  return _regeneratorRuntime.wrap(function fetchCollection$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return put(iiifResourceRequest(id, [COLLECTION_REQUEST, COLLECTION_SUCCESS, COLLECTION_ERROR], collection));\n\n        case 2:\n        case 'end':\n          return _context.stop();\n      }\n    }\n  }, _marked, this);\n}\n\nfunction saga() {\n  return _regeneratorRuntime.wrap(function saga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return all([takeEvery(ROUTING_SELECT_COLLECTION, fetchCollection)]);\n\n        case 2:\n        case 'end':\n          return _context2.stop();\n      }\n    }\n  }, _marked2, this);\n}\n\nexport { COLLECTION_SUCCESS, COLLECTION_REQUEST, COLLECTION_ERROR, saga };\n\n\n// WEBPACK FOOTER //\n// ../iiif-redux/es/spaces/collections.js"],"sourceRoot":""}